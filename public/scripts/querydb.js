"use strict";function clearField(a,e){getmdlSelect.init(".mdl-filter"+a),document.getElementsByClassName("mdl-filter"+a)[0].classList.remove("is-dirty"),e.style.display="none"}function objaviStatus(){var a=$("#trenutniUporabnik").val();if($("#status"+a).html($("#currStatus").val()),""!=$("#currStatus").val()){var e={currStatus:$("#currStatus").val()};$.ajax({url:"/status",type:"POST",contentType:"application/json",data:JSON.stringify(e),success:function(){$("#currStatus").val("");document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Status je bil uspešno posodobljen!"})},error:function(a,e,t){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Prišlo je do napake, status ni bil shranjen!"})}})}}jQuery(function(u){var n=void 0;u("#osebaSearch").get(0).onchange=function(){u("#chipOseba").attr("style","display: inline-block;").find("span:first-child").text(u(this).val())},u("#statusSearch").get(0).onchange=function(){u("#chipStatus").attr("style","display: inline-block;").find("span:first-child").text(u(this).val())},u("#kategorijaSearch").get(0).onchange=function(){u("#chipKategorija").attr("style","display: inline-block;").find("span:first-child").text(u(this).val())},u("#avtorSearch").get(0).onchange=function(){u("#chipAvtor").attr("style","display: inline-block;").find("span:first-child").text(u(this).val())},u("#koledarSearch").get(0).onchange=function(){u("#chipKoledar").attr("style","display: inline-block;").find("span:first-child").text(u(this).val())},u("#ciljSearch").get(0).onchange=function(){u("#chipCilj").attr("style","display: inline-block;").find("span:first-child").text(u(this).val())};var e=u("#pagination");function t(){n=u(".paginate"),e.pagination("updateItems",n.length);var a=Math.min(e.pagination("getCurrentPage"),e.pagination("getPagesCount"));e.pagination("selectPage",a)}e.pagination({itemsOnPage:8,cssStyle:"light-theme",onPageClick:function(a){var e=u(document).width(),t=8*(a-1),l=t+8;u(".naloge-center").attr("style","display: none!important");for(var i=t;i<=l;i++)1440<e?(u("#cellHa"+i).attr("style","display: block!important"),u("#cellHb"+i).attr("style","display: block!important")):840<e&&(u("#cellPa"+i).attr("style","display: block!important"),u("#cellPb"+i).attr("style","display: block!important"));console.log(e),n.hide().slice(t,l).show()}}),u("#filter").click(function(){var a={};""!=u("input[name='osebaSearch']").val()&&(a.oseba=u("input[name='osebaSearch']").val()),""!=u("#statusSearch").val()&&(a.status=u("input[name='statusSearch']").val()),""!=u("input[name='kategorijaSearch']").val()&&(a.kategorija=u("input[name='kategorijaSearch']").val()),""!=u("input[name='avtorSearch']").val()&&(a.avtor=u("input[name='avtorSearch']").val()),""!=u("#koledarSearch").val()&&(a.koledar=u("#koledarSearch").val()),""!=u("#ciljSearch").val()&&(a.cilj=u("#ciljSearch").val()),u.ajax({url:"/prikazi_naloge",type:"POST",data:a,success:function(a){console.log(a),u("#nalogeGrid").html(a),t(),function(a,e){var t=document.getElementById("nalogeGrid").getElementsByClassName("mdl-card"),l=void 0;for(l=0;l<t.length;l++)t[l].onclick=function(a){return function(){e(a,event)}}(t[l])}(0,function(a,e){posodobiNalogo(),u("#newDialog").val(a.getElementsByClassName("idNaloga")[0].value),u("#imeDialog").val(a.getElementsByClassName("mdl-list__item-text-body")[0].previousElementSibling.innerHTML).parent().addClass("is-dirty"),u("#opisDialog").val(a.getElementsByClassName("mdl-list__item-text-body")[0].innerHTML).parent().addClass("is-dirty");var t=void 0,l=void 0;try{t=a.getElementsByClassName("dateNaloga")[0].innerHTML,l=a.getElementsByClassName("dateNaloga")[1].innerHTML}catch(a){console.log(a)}t&&(u("#targetZacetek").val(t).parent().addClass("is-dirty"),u("#dateZacetek").val(moment(t.replace(" ob "," "),"DD-MM-Y HH:mm").format("Y-MM-DD HH:mm"))),l&&(u("#targetKonec").val(l).parent().addClass("is-dirty"),u("#dateKonec").val(moment(l.replace(" ob "," "),"DD-MM-Y HH:mm").format("Y-MM-DD HH:mm")));var i=a.getElementsByClassName("kategorijaNaloga")[0].value;u("#kategorija").get(0).placeholder=u(".list-kategorija").find("[data-val="+i+"]").get(0).textContent.trim(),u("input[name='sampleKategorija']").parent().addClass("is-dirty").find("li[data-val="+i+"]").attr("data-selected","true"),getmdlSelect.init("#dialogKategorija");var n=a.getElementsByClassName("ciljNaloga")[0].value;u("#vezanCilj").get(0).placeholder=u(".list-cilj").find("[data-val="+n+"]").get(0).textContent.trim(),u("input[name='sampleCilj']").parent().addClass("is-dirty").find("li[data-val="+n+"]").attr("data-selected","true"),getmdlSelect.init("#dialogCilj");var s=a.getElementsByClassName("statusNaloga")[0].innerHTML;"Neopravljena"==(u("#statusNaloge").get(0).placeholder=s)?(u("#statusNaloge").parent().addClass("is-dirty").find("li[data-val=false]").attr("data-selected","true"),u("input[name='oldStatus']").val("false"),u("input[name='newStatus']").val("false")):(u("#statusNaloge").parent().addClass("is-dirty").find("li[data-val=true]").attr("data-selected","true"),u("input[name='oldStatus']").val("true"),u("input[name='newStatus']").val("true")),getmdlSelect.init("#dialogStatus"),u("#xpNaloge").val(a.getElementsByClassName("xpNaloga")[0].innerHTML.match(/\d/g).join("")).parent().addClass("is-dirty");var r=a.getElementsByClassName("udelezenecNaloga"),o=u("input:checkbox[name='person']");u("#checkboxVsi").parent()[0].MaterialCheckbox.uncheck(),o.length-1==r.length&&u("#checkboxVsi").parent()[0].MaterialCheckbox.check();for(var c,d=0,m=1;m<o.length;m++)if((c=u("#"+o[m].id).parent()[0].MaterialCheckbox).uncheck(),r[d].value==o[m].value){console.log(r),c.check(),d++;break}e.stopPropagation()})},error:function(a,e,t){alert(a.status),alert(a.responseText),alert(t)}}),console.log("updating items"),t()}),u("#reset").click(function(){console.log("form reseted"),getmdlSelect.init(".mdl-filter"),u(".selected").removeClass("selected"),u("input[name='osebaSearch']").val("").parent().removeClass("is-dirty"),u("#statusSearch").val("").parent().removeClass("is-dirty"),u("input[name='kategorijaSearch']").val("").parent().removeClass("is-dirty"),u("input[name='avtorSearch']").val("").parent().removeClass("is-dirty"),u("#koledarSearch").val("").parent().removeClass("is-dirty"),u("#ciljSearch").val("").parent().removeClass("is-dirty")})});