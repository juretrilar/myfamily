"use strict";function clearField(a,e){getmdlSelect.init(".mdl-filter"+a),document.getElementsByClassName("mdl-filter"+a)[0].classList.remove("is-dirty"),e.style.display="none"}function objaviStatus(){var a=$("#trenutniUporabnik").val();if($("#status"+a).html($("#currStatus").val()),""!=$("#currStatus").val()){var e={currStatus:$("#currStatus").val()};$.ajax({url:"/status",type:"POST",contentType:"application/json",data:JSON.stringify(e),success:function(){$("#currStatus").val("");document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Status je bil uspešno posodobljen!"})},error:function(a,e,t){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Prišlo je do napake, status ni bil shranjen!"})}})}}jQuery(function(m){var n=void 0;m("#osebaSearch").get(0).onchange=function(){m("#chipOseba").attr("style","display: inline-block;").find("span:first-child").text(m(this).val())},m("#statusSearch").get(0).onchange=function(){m("#chipStatus").attr("style","display: inline-block;").find("span:first-child").text(m(this).val())},m("#kategorijaSearch").get(0).onchange=function(){m("#chipKategorija").attr("style","display: inline-block;").find("span:first-child").text(m(this).val())},m("#avtorSearch").get(0).onchange=function(){m("#chipAvtor").attr("style","display: inline-block;").find("span:first-child").text(m(this).val())},m("#koledarSearch").get(0).onchange=function(){m("#chipKoledar").attr("style","display: inline-block;").find("span:first-child").text(m(this).val())},m("#ciljSearch").get(0).onchange=function(){m("#chipCilj").attr("style","display: inline-block;").find("span:first-child").text(m(this).val())};var e=m("#pagination");function t(){n=m(".paginate"),e.pagination("updateItems",n.length);var a=Math.min(e.pagination("getCurrentPage"),e.pagination("getPagesCount"));e.pagination("selectPage",a),24<n.length&&m("#pagination").attr("style","display: list-view")}e.pagination({itemsOnPage:24,cssStyle:"light-theme",onPageClick:function(a){var e=m(document).width(),t=24*(a-1),l=t+24;m(".naloge-center").attr("style","display: none!important");for(var i=t;i<=l;i++)1440<e?(m("#cellHa"+i).attr("style","display: block!important"),m("#cellHb"+i).attr("style","display: block!important")):840<e&&(m("#cellPa"+i).attr("style","display: block!important"),m("#cellPb"+i).attr("style","display: block!important"));console.log(e),n.hide().slice(t,l).show()}}),m("#filter").click(function(){var a={};""!=m("input[name='osebaSearch']").val()&&(a.oseba=m("input[name='osebaSearch']").val()),""!=m("#statusSearch").val()&&(a.status=m("input[name='statusSearch']").val()),""!=m("input[name='kategorijaSearch']").val()&&(a.kategorija=m("input[name='kategorijaSearch']").val()),""!=m("input[name='avtorSearch']").val()&&(a.avtor=m("input[name='avtorSearch']").val()),""!=m("#koledarSearch").val()&&(a.koledar=m("#koledarSearch").val()),""!=m("#ciljSearch").val()&&(a.cilj=m("#ciljSearch").val()),m.ajax({url:"/prikazi_naloge",type:"POST",data:a,success:function(a){console.log(a),m("#nalogeGrid").html(a),t(),function(a,e){var t=document.getElementById("nalogeGrid").getElementsByClassName("mdl-card"),l=void 0;for(l=0;l<t.length;l++)t[l].onclick=function(a){return function(){e(a,event)}}(t[l])}(0,function(a,e){posodobiNalogo(),m("#newDialog").val(a.getElementsByClassName("idNaloga")[0].value),m("#imeDialog").val(a.getElementsByClassName("mdl-list__item-text-body")[0].previousElementSibling.innerHTML).parent().addClass("is-dirty"),m("#opisDialog").val(a.getElementsByClassName("mdl-list__item-text-body")[0].innerHTML).parent().addClass("is-dirty");var t=void 0,l=void 0;try{t=a.getElementsByClassName("dateNaloga")[0].innerHTML,l=a.getElementsByClassName("dateNaloga")[1].innerHTML}catch(a){console.log(a)}t&&(m("#targetZacetek").val(t).parent().addClass("is-dirty"),m("#dateZacetek").val(moment(t.replace(" ob "," "),"DD-MM-Y HH:mm").format("Y-MM-DD HH:mm"))),l&&(m("#targetKonec").val(l).parent().addClass("is-dirty"),m("#dateKonec").val(moment(l.replace(" ob "," "),"DD-MM-Y HH:mm").format("Y-MM-DD HH:mm")));var i=a.getElementsByClassName("kategorijaNaloga")[0].value;m("#kategorija").get(0).placeholder=m(".list-kategorija").find("[data-val="+i+"]").get(0).textContent.trim(),m("input[name='sampleKategorija']").parent().addClass("is-dirty").find("li[data-val="+i+"]").attr("data-selected","true"),getmdlSelect.init("#dialogKategorija");var n=a.getElementsByClassName("ciljNaloga")[0].value;m("#vezanCilj").get(0).placeholder=m(".list-cilj").find("[data-val="+n+"]").get(0).textContent.trim(),m("input[name='sampleCilj']").parent().addClass("is-dirty").find("li[data-val="+n+"]").attr("data-selected","true"),getmdlSelect.init("#dialogCilj");var s=a.getElementsByClassName("statusNaloga")[0].innerHTML;"Neopravljena"==(m("#statusNaloge").get(0).placeholder=s)?(m("#statusNaloge").parent().addClass("is-dirty").find("li[data-val=false]").attr("data-selected","true"),m("input[name='oldStatus']").val("false"),m("input[name='newStatus']").val("false")):(m("#statusNaloge").parent().addClass("is-dirty").find("li[data-val=true]").attr("data-selected","true"),m("input[name='oldStatus']").val("true"),m("input[name='newStatus']").val("true")),getmdlSelect.init("#dialogStatus"),m("#xpNaloge").val(a.getElementsByClassName("xpNaloga")[0].innerHTML.match(/\d/g).join("")).parent().addClass("is-dirty");var r=a.getElementsByClassName("udelezenecNaloga"),o=m("input:checkbox[name='person']");m("#checkboxVsi").parent()[0].MaterialCheckbox.uncheck(),o.length-1==r.length&&m("#checkboxVsi").parent()[0].MaterialCheckbox.check();for(var c,d=0,g=1;g<o.length;g++)if((c=m("#"+o[g].id).parent()[0].MaterialCheckbox).uncheck(),r[d].value==o[g].value){console.log(r),c.check(),d++;break}e.stopPropagation()})},error:function(a,e,t){alert(a.status),alert(a.responseText),alert(t)}}),console.log("updating items"),t()}),m("#reset").click(function(){console.log("form reseted"),getmdlSelect.init(".mdl-filter"),m(".selected").removeClass("selected"),m("input[name='osebaSearch']").val("").parent().removeClass("is-dirty"),m("#statusSearch").val("").parent().removeClass("is-dirty"),m("input[name='kategorijaSearch']").val("").parent().removeClass("is-dirty"),m("input[name='avtorSearch']").val("").parent().removeClass("is-dirty"),m("#koledarSearch").val("").parent().removeClass("is-dirty"),m("#ciljSearch").val("").parent().removeClass("is-dirty")})});