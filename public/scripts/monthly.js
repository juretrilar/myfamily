"use strict";function prikaziPodatke(t){var e="/koledar/"+t;24==t.length&&$.ajax({type:"GET",url:e,success:function(t){console.log(t),t.includes("<!doctype html>")?window.location.reload():($("#NalogaPopUp").html(t).css("display","inline-flex"),$("body").click(function(t){"NalogaPopUp"==t.target.id||$(t.target).parents("#NalogaPopUp").length||($("#NalogaPopUp").hide(),$("#NalogaPopUp").unbind())}))},error:function(t,e,a){alert(t.status),alert(t.responseText),alert(a)}}),event.preventDefault()}!function(z){z.fn.extend({monthly:function(t){var F=z.extend({dataType:"json",disablePast:!1,eventList:!0,events:"",jsonUrl:"",linkCalendarToEventUrl:!1,maxWidth:!1,mode:"event",setWidth:!1,showTrigger:"",startHidden:!1,stylePast:!1,target:"",useIsoDateFormat:!1,weekStart:0,xmlUrl:""},t),p=z(this).attr("id"),W="#"+p,e=new Date,v=e.getMonth()+1,u=e.getFullYear(),f=e.getDate(),d=(F.locale||function(){if(navigator.languages&&navigator.languages.length)return navigator.languages[0];return navigator.language||navigator.browserLanguage}()).toLowerCase(),g=(F.monthNameFormat,F.weekdayNameFormat,F.monthNames||["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"]),k=F.dayNames||["Ned","Pon","Tor","Sre","ÄŒet","Pet","Sob"],b='<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>',w="Mon"===F.weekStart||1===F.weekStart||"1"===F.weekStart,a=d.substring(0,2).toLowerCase();function A(t,e){return 2===t?3&e||!(e%25)&&15&e?28:29:30+(t+(t>>3)&1)}function n(t,e){z(W).data("setMonth",t).data("setYear",e);var a=0,n=A(t,e),o=t-1,l=new Date(e,o,1,0,0,0,0).getDay(),i=t===v&&e===u;z(W+" .monthly-day, "+W+" .monthly-day-blank").remove(),z(W+" .monthly-event-list, "+W+" .monthly-day-wrap").empty();for(var r=1;r<=n;r++){var s=F.stylePast&&(e<u||e===u&&(t<v||t===v&&r<f)),d='<div class="monthly-day-number">'+r+'</div><div class="monthly-indicator-wrap" ></div>';if("event"===F.mode){var c=new Date(e,o,r,0,0,0,0);z(W+" .monthly-day-wrap").append("<div"+$("class","m-d monthly-day monthly-day-event"+(s?" monthly-past-day":"")+" dt"+c.toISOString().slice(0,10))+$("data-number",r)+">"+d+"</div>"),z(W+" .monthly-event-list").append("<div"+$("class","monthly-list-item")+$("id",p+"day"+r)+$("data-number",r)+'><div class="monthly-event-list-date">'+k[c.getDay()]+"<br>"+r+"</div></div>")}else z(W+" .monthly-day-wrap").append("<a"+$("href","#")+$("class","m-d monthly-day monthly-day-pick"+(s?" monthly-past-day":""))+$("data-number",r)+">"+d+"</a>")}i&&z(W+' *[data-number="'+f+'"]').addClass("monthly-today"),z(W+" .monthly-header-title").html('<a href="#" class="monthly-header-title-date" onclick="return false">'+g[t-1]+" "+e+"</a>"+(i&&z(W+" .monthly-event-list").hide()?"":'<a href="#" class="monthly-reset"></a>')),w?0===l?D(6):1!==l&&D(l-1):7!==l&&D(l);var m=z(W+" .monthly-day").length+z(W+" .monthly-day-blank").length,h=7*Math.ceil(m/7)-m;if(m%7!=0)for(a=0;a<h;a++)z(W+" .monthly-day-wrap").append(b);"event"===F.mode&&function(e,a){if(F.events)P(F.events,e,a);else{var t="xml"===F.dataType?F.xmlUrl:F.jsonUrl;if(t){var n=String(t).replace("{month}",e).replace("{year}",a);z.get(n,{now:z.now()},function(t){P(t,e,a)},F.dataType).fail(function(){console.error("Monthly.js failed to import "+t+". Please check for the correct path and "+F.dataType+" syntax.")})}}}(t,e);var y=z(W+" .m-d");for(a=0;a<y.length;a+=7)y.slice(a,a+7).wrapAll('<div class="monthly-week"></div>')}function o(t,e,a){var n=L(t,"startdate"),o=L(t,"enddate"),l=n.split("-"),i=parseInt(l[0],10),r=parseInt(l[1],10),s=parseInt(l[2],10),d=s,c=s,m=s,h=r===e&&i===a,y=h;if(o){var p=o.split("-"),v=parseInt(p[0],10),u=parseInt(p[1],10),f=parseInt(p[2],10),g=u===e&&v===a;(h||g||(i<a||r<e&&i===a)&&(a<v||e<u&&v===a))&&(y=!0,d=h?s:1,c=g?f:A(e,a),m=h?d:1)}if(y){var k=L(t,"starttime"),b="",w=L(t,"url"),P=L(t,"name"),D=L(t,"class"),T=L(t,"color"),x=L(t,"id"),N=D?" "+D:"",S="<div",U="</span></div>";if(k){var I=L(t,"endtime");b='<div><div class="monthly-list-time-start">'+Y(k)+"</div>"+(I?'<div class="monthly-list-time-end">'+Y(I)+"</div>":"")+"</div>"}F.linkCalendarToEventUrl&&w&&(S="<a"+$("href",w),U="</span></a>");for(var M,C=S+$("data-eventid",x)+$("title",P)+(T?$("style","background:"+T+";color:"+T):""),j="<a"+$("href",w)+$("class","listed-event"+N)+$("data-eventid",x)+(T?$("style","background:"+T):"")+$("title",P)+">"+P+" "+b+"</a>",E=d;E<=c;E++)M=E===m,z(W+' *[data-number="'+E+'"] .monthly-indicator-wrap').append(C+$("class","monthly-event-indicator"+N+(M?"":" monthly-event-continued"))+"><span>"+(M?P:"")+U),z(W+' .monthly-list-item[data-number="'+E+'"]').addClass("item-has-event").append(j)}}function P(t,a,n){"xml"===F.dataType?z(t).find("event").each(function(t,e){o(e,a,n)}):"json"===F.dataType&&z.each(t.monthly,function(t,e){o(e,a,n)})}function $(t,e){for(var a=String(e),n="",o=0;o<a.length;o++)switch(a[o]){case"'":n+="&#39;";break;case'"':n+="&quot;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=a[o]}return" "+t+'="'+n+'"'}function D(t){var e=z(W+" .monthly-day-wrap"),a=0;for(a=0;a<t;a++)e.prepend(b)}function L(t,e){return"xml"===F.dataType?z(t).find(e).text():t[e]}function Y(t){var e=t.split(":"),a=parseInt(e[0],10),n="AM";return 12<a?(a-=12,n="PM"):12==a?n="PM":0===a&&(a=12),a+":"+String(e[1])+" "+n}function c(){z(W+" .monthly-event-list").is(":visible")&&(z(W+" .monthly-cal").remove(),z(W+" .monthly-header-title").prepend('<a href="#" class="monthly-cal"></a>'))}!1!==F.maxWidth&&z(W).css("maxWidth",F.maxWidth),!1!==F.setWidth&&z(W).css("width",F.setWidth),F.startHidden&&(z(W).addClass("monthly-pop").css({display:"none",position:"absolute"}),z(document).on("focus",String(F.showTrigger),function(t){z(W).show(),t.preventDefault()}),z(document).on("click",String(F.showTrigger)+", .monthly-pop",function(t){t.stopPropagation(),t.preventDefault()}),z(document).on("click",function(){z(W).hide()})),function(t){var e=t?1:0,a="",n=0;for(n=0;n<6;n++)a+="<div>"+k[n+e]+"</div>";a+="<div>"+k[t?0:6]+"</div>",z(W).append('<div class="monthly-day-title-wrap">'+a+'</div><div class="monthly-day-wrap"></div>')}(w),z(W).addClass("monthly-locale-"+a+" monthly-locale-"+d),z(W).prepend('<div class="monthly-header"><div class="monthly-header-title"><a href="#" class="monthly-header-title-date" onclick="return false"></a></div><a href="#" class="monthly-prev"></a><a href="#" class="monthly-next"></a></div>').append('<div class="monthly-event-list"></div>'),n(v,u),z(document.body).on("click",W+" .monthly-next",function(t){var e,a;e=z(W).data("setMonth"),a=z(W).data("setYear"),n(12===e?1:e+1,12===e?a+1:a),c(),t.preventDefault()}),z(document.body).on("click",W+" .monthly-prev",function(t){var e,a;e=z(W).data("setMonth"),a=z(W).data("setYear"),n(1===e?12:e-1,1===e?a-1:a),c(),t.preventDefault()}),z(document.body).on("click",W+" .monthly-reset",function(t){z(this).remove(),n(v,u),c(),t.preventDefault(),t.stopPropagation()}),z(document.body).on("click",W+" .monthly-cal",function(t){z(this).remove(),z(W+" .monthly-event-list").css("transform","scale(0)"),setTimeout(function(){z(W+" .monthly-event-list").hide()},250),t.preventDefault(),z("#NalogaPopUp").css("display","none")}),z(document.body).on("click touchstart",W+" .monthly-day",function(t){var e,a,n,o=z(this).data("number");if("event"===F.mode&&F.eventList){var l=z(W+" .monthly-event-list"),i=document.getElementById(p+"day"+o).offsetTop;l.show(),l.css("transform"),l.css("transform","scale(1)"),z(W+" .monthly-event-list .monthly-list-item").hide(),z(W+' .monthly-list-item[data-number="'+o+'"]').show(),l.scrollTop(i),c(),F.linkCalendarToEventUrl||t.preventDefault(),"SPAN"==t.target.nodeName?prikaziPodatke(t.target.parentElement.getAttribute("data-eventid")):prikaziPodatke(t.target.attributes[0].value)}else if("picker"===F.mode){var r=z(W).data("setMonth"),s=z(W).data("setYear");z(this).hasClass("monthly-past-day")&&F.disablePast?t.preventDefault():(z(String(F.target)).val((e=s,a=r,n=o,F.useIsoDateFormat?new Date(e,a-1,n,0,0,0).toISOString().substring(0,10):"undefined"==typeof Intl?a+"/"+n+"/"+e:new Intl.DateTimeFormat(d).format(new Date(e,a-1,n,0,0,0)))),0!=z("#targetZacetek").val().length&&z("#dialogZacetek").addClass("is-dirty"),0!=z("#targetKonec").val().length&&z("#dialogKonec").addClass("is-dirty"),F.startHidden&&z(W).hide()),t.preventDefault()}}),z(document.body).on("click",W+" .listed-event",function(t){var e=z(this).attr("href");e&&z.ajax({type:"GET",url:e,success:function(t){t.includes("<!doctype html>")?window.location.reload():(z("#NalogaPopUp").html(t).css("display","inline-flex"),z("body").click(function(t){"NalogaPopUp"==t.target.id||z(t.target).parents("#NalogaPopUp").length||(z("#NalogaPopUp").hide(),z("#NalogaPopUp").unbind())}))},error:function(t,e,a){console.log(t.status),console.log(t.responseText),console.log(a)}}),t.preventDefault()})}})}(jQuery);