"use strict";!function(J){J.fn.extend({monthly:function(t){var W=J.extend({dataType:"json",disablePast:!1,eventList:!0,events:"",jsonUrl:"",linkCalendarToEventUrl:!1,maxWidth:!1,mode:"event",setWidth:!1,showTrigger:"",startHidden:!1,stylePast:!1,target:"",useIsoDateFormat:!1,weekStart:0,xmlUrl:""},t),v=J(this).attr("id"),E="#"+v,e=new Date,p=e.getMonth()+1,u=e.getFullYear(),f=e.getDate(),d=(W.locale||function(){if(navigator.languages&&navigator.languages.length)return navigator.languages[0];return navigator.language||navigator.browserLanguage}()).toLowerCase(),g=(W.monthNameFormat,W.weekdayNameFormat,W.monthNames||["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"]),b=W.dayNames||["Ned","Pon","Tor","Sre","ÄŒet","Pet","Sob"],w='<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>',k="Mon"===W.weekStart||1===W.weekStart||"1"===W.weekStart,a=d.substring(0,2).toLowerCase();function L(t,e){return 2===t?3&e||!(e%25)&&15&e?28:29:30+(t+(t>>3)&1)}function n(t,e){J(E).data("setMonth",t).data("setYear",e);var a=0,n=L(t,e),l=t-1,o=new Date(e,l,1,0,0,0,0).getDay(),s=t===p&&e===u;J(E+" .monthly-day, "+E+" .monthly-day-blank").remove(),J(E+" .monthly-event-list, "+E+" .monthly-day-wrap").empty();for(var r=1;r<=n;r++){var i=W.stylePast&&(e<u||e===u&&(t<p||t===p&&r<f)),d='<div class="monthly-day-number">'+r+'</div><div class="monthly-indicator-wrap" ></div>';if("event"===W.mode){var m=new Date(e,l,r,0,0,0,0);J(E+" .monthly-day-wrap").append("<div"+Y("class","m-d monthly-day monthly-day-event"+(i?" monthly-past-day":"")+" dt"+m.toISOString().slice(0,10))+Y("data-number",r)+">"+d+"</div>"),J(E+" .monthly-event-list").append("<div"+Y("class","monthly-list-item")+Y("id",v+"day"+r)+Y("data-number",r)+'><div class="monthly-event-list-date">'+b[m.getDay()]+"<br>"+r+"</div></div>")}else J(E+" .monthly-day-wrap").append("<a"+Y("href","#")+Y("class","m-d monthly-day monthly-day-pick"+(i?" monthly-past-day":""))+Y("data-number",r)+">"+d+"</a>")}s&&J(E+' *[data-number="'+f+'"]').addClass("monthly-today"),J(E+" .monthly-header-title").html('<a href="#" class="monthly-header-title-date" onclick="return false">'+g[t-1]+" "+e+"</a>"+(s&&J(E+" .monthly-event-list").hide()?"":'<a href="#" class="monthly-reset"></a>')),k?0===o?T(6):1!==o&&T(o-1):7!==o&&T(o);var c=J(E+" .monthly-day").length+J(E+" .monthly-day-blank").length,h=7*Math.ceil(c/7)-c;if(c%7!=0)for(a=0;a<h;a++)J(E+" .monthly-day-wrap").append(w);"event"===W.mode&&function(e,a){if(W.events)D(W.events,e,a);else{var t="xml"===W.dataType?W.xmlUrl:W.jsonUrl;if(t){var n=String(t).replace("{month}",e).replace("{year}",a);J.get(n,{now:J.now()},function(t){D(t,e,a)},W.dataType).fail(function(){console.error("Monthly.js failed to import "+t+". Please check for the correct path and "+W.dataType+" syntax.")})}}}(t,e);var y=J(E+" .m-d");for(a=0;a<y.length;a+=7)y.slice(a,a+7).wrapAll('<div class="monthly-week"></div>')}function l(t,e,a){var n=A(t,"startdate"),l=A(t,"enddate"),o=n.split("-"),s=parseInt(o[0],10),r=parseInt(o[1],10),i=parseInt(o[2],10),d=i,m=i,c=i,h=r===e&&s===a,y=h;if(l){var v=l.split("-"),p=parseInt(v[0],10),u=parseInt(v[1],10),f=parseInt(v[2],10),g=u===e&&p===a;(h||g||(s<a||r<e&&s===a)&&(a<p||e<u&&p===a))&&(y=!0,d=h?i:1,m=g?f:L(e,a),c=h?d:1)}if(y){var b=A(t,"starttime"),w="",k=A(t,"url"),D=A(t,"name"),T=A(t,"class"),x=A(t,"color"),S=A(t,"id"),I=T?" "+T:"",M="<div",P="</span></div>";if(b){var C=A(t,"endtime");w='<div><div class="monthly-list-time-start">'+H(b)+"</div>"+(C?'<div class="monthly-list-time-end">'+H(C)+"</div>":"")+"</div>"}W.linkCalendarToEventUrl&&k&&(M="<a"+Y("href",k),P="</span></a>");for(var U,j=M+Y("data-eventid",S)+Y("title",D)+(x?Y("style","background:"+x+";color:"+x):""),N="<a"+Y("href",k)+Y("class","listed-event"+I)+Y("data-eventid",S)+(x?Y("style","background:"+x):"")+Y("title",D)+">"+D+" "+w+"</a>",F=d;F<=m;F++)U=F===c,J(E+' *[data-number="'+F+'"] .monthly-indicator-wrap').append(j+Y("class","monthly-event-indicator"+I+(U?"":" monthly-event-continued"))+"><span>"+(U?D:"")+P),J(E+' .monthly-list-item[data-number="'+F+'"]').addClass("item-has-event").append(N)}}function D(t,a,n){"xml"===W.dataType?J(t).find("event").each(function(t,e){l(e,a,n)}):"json"===W.dataType&&J.each(t.monthly,function(t,e){l(e,a,n)})}function Y(t,e){for(var a=String(e),n="",l=0;l<a.length;l++)switch(a[l]){case"'":n+="&#39;";break;case'"':n+="&quot;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=a[l]}return" "+t+'="'+n+'"'}function T(t){var e=J(E+" .monthly-day-wrap"),a=0;for(a=0;a<t;a++)e.prepend(w)}function A(t,e){return"xml"===W.dataType?J(t).find(e).text():t[e]}function H(t){var e=t.split(":"),a=parseInt(e[0],10),n="AM";return 12<a?(a-=12,n="PM"):12==a?n="PM":0===a&&(a=12),a+":"+String(e[1])+" "+n}function m(){J(E+" .monthly-event-list").is(":visible")&&(J(E+" .monthly-cal").remove(),J(E+" .monthly-header-title").prepend('<a href="#" class="monthly-cal"></a>'))}!1!==W.maxWidth&&J(E).css("maxWidth",W.maxWidth),!1!==W.setWidth&&J(E).css("width",W.setWidth),W.startHidden&&(J(E).addClass("monthly-pop").css({display:"none",position:"absolute"}),J(document).on("focus",String(W.showTrigger),function(t){J(E).show(),t.preventDefault()}),J(document).on("click",String(W.showTrigger)+", .monthly-pop",function(t){t.stopPropagation(),t.preventDefault()}),J(document).on("click",function(){J(E).hide()})),function(t){var e=t?1:0,a="",n=0;for(n=0;n<6;n++)a+="<div>"+b[n+e]+"</div>";a+="<div>"+b[t?0:6]+"</div>",J(E).append('<div class="monthly-day-title-wrap">'+a+'</div><div class="monthly-day-wrap"></div>')}(k),J(E).addClass("monthly-locale-"+a+" monthly-locale-"+d),J(E).prepend('<div class="monthly-header"><div class="monthly-header-title"><a href="#" class="monthly-header-title-date" onclick="return false"></a></div><a href="#" class="monthly-prev"></a><a href="#" class="monthly-next"></a></div>').append('<div class="monthly-event-list"></div>'),n(p,u),J(document.body).on("click",E+" .monthly-next",function(t){var e,a;e=J(E).data("setMonth"),a=J(E).data("setYear"),n(12===e?1:e+1,12===e?a+1:a),m(),t.preventDefault()}),J(document.body).on("click",E+" .monthly-prev",function(t){var e,a;e=J(E).data("setMonth"),a=J(E).data("setYear"),n(1===e?12:e-1,1===e?a-1:a),m(),t.preventDefault()}),J(document.body).on("click",E+" .monthly-reset",function(t){J(this).remove(),n(p,u),m(),t.preventDefault(),t.stopPropagation()}),J(document.body).on("click",E+" .monthly-cal",function(t){J(this).remove(),J(E+" .monthly-event-list").css("transform","scale(0)"),setTimeout(function(){J(E+" .monthly-event-list").hide()},250),t.preventDefault(),J("#NalogaPopUp").css("display","none")}),J(document.body).on("click touchstart",E+" .monthly-day",function(t){var e,a,n,l=J(this).data("number");if("event"===W.mode&&W.eventList){var o=J(E+" .monthly-event-list"),s=document.getElementById(v+"day"+l).offsetTop;o.show(),o.css("transform"),o.css("transform","scale(1)"),J(E+" .monthly-event-list .monthly-list-item").hide(),J(E+' .monthly-list-item[data-number="'+l+'"]').show(),o.scrollTop(s),m(),W.linkCalendarToEventUrl||t.preventDefault()}else if("picker"===W.mode){var r=J(E).data("setMonth"),i=J(E).data("setYear");J(this).hasClass("monthly-past-day")&&W.disablePast?t.preventDefault():(J(String(W.target)).val((e=i,a=r,n=l,W.useIsoDateFormat?new Date(e,a-1,n,0,0,0).toISOString().substring(0,10):"undefined"==typeof Intl?a+"/"+n+"/"+e:new Intl.DateTimeFormat(d).format(new Date(e,a-1,n,0,0,0)))),0!=J("#targetZacetek").val().length&&J("#dialogZacetek").addClass("is-dirty"),0!=J("#targetKonec").val().length&&J("#dialogKonec").addClass("is-dirty"),W.startHidden&&J(E).hide()),t.preventDefault()}}),J(document.body).on("click",E+" .listed-event",function(t){var e=J(this).attr("href");e&&J.ajax({type:"GET",url:e,success:function(t){J("#NalogaPopUp").html(t).css("display","inline-flex")},error:function(t,e,a){alert(t.status),alert(t.responseText),alert(a)}}),t.preventDefault()})}})}(jQuery);