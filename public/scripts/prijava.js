"use strict";function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}r(function(){localStorage.getItem("Status")&&(document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:localStorage.getItem("Status")}),localStorage.removeItem("Status"))}),$(document).ready(function(){setTimeout(function(){var e=$('input[type="password"]:-webkit-autofill'),i=$('input[type="email"]:-webkit-autofill');e.parent().addClass("is-dirty"),i.parent().addClass("is-dirty")},100)});var intro=introJs();function prikaziRegistracija(){$("#prijava").hide(),$("#lostPass").hide(),$("#registracija").show().scrollTop,intro.hideHints()}function prikaziPass(){$("#prijava").hide(),$("#registracija").hide(),$("#lostPass").show().scrollTop,intro.hideHints()}function prikaziPrijava(){$("#lostPass").hide(),$("#registracija").hide(),intro.hideHints(),$("#prijava").show().scrollTop}function isImage(e){return"image"==e.type.split("/")[0]}function validateRegistracija(){return""===document.forms.registracijaForm.reg_name.value?($("#errIme").text("Polje je obvezno!").parent().addClass("is-invalid"),!1):""===document.forms.registracijaForm.reg_email.value?($("#errEmail").text("Polje je obvezno!").parent().addClass("is-invalid"),!1):""===document.forms.registracijaForm.reg_password.value?($("#errPass").text("Polje je obvezno").parent().addClass("is-invalid"),!1):document.forms.registracijaForm.reg_password.value!=document.forms.registracijaForm.reg_password_confirm.value?($("#errPass2").parent().addClass("is-invalid"),!1):""==document.forms.registracijaForm.reg_phone.value?($("#errTel").text("Polje je obvezno!").parent().addClass("is-invalid"),!1):(intro.hideHints(),!0)}function updatePic(e){console.log(e.files[0]),e.files[0]?$("#reg_slika_ime").val(e.files[0].name).parent().addClass("is-dirty"):$("#reg_slika_ime").val("").parent().removeClass("is-dirty")}function addHintsReg(){intro.setOptions({hintButtonLabel:"Razumem!",hintPosition:"top-right",hints:[{element:document.querySelector("#reg_name"),hint:"V polje vpišite vaše ime in priimek."},{element:document.querySelector("#reg_email"),hint:"V to polje vpišite vaš elektronski naslov, ki ga boste uporabljali za prijavo v aplikacijo in nanj prejemali obvestila."},{element:"#reg_password",hint:"V to polje vpišite geslo, ki naj bo dolgo vsaj 6 znakov. Geslo mora vsebovati vsaj eno veliko črko in številko."},{element:"#reg_password_confirm",hint:"Ponovno vpišite izbrano geslo."},{element:"#reg_phone",hint:"V to polje vpišite vašo telefonsko številko, na katero boste prejemali sms sporočila."},{element:"#avatars",hint:"Izberite si prikazno sliko v aplikaciji. Če slike ne izberete, vam bo določena s strani aplikacije."}]}),intro.onhintsadded(function(){console.log("all hints added")}),intro.onhintclick(function(e,i,a){console.log("hint clicked",e,i,a)}),intro.onhintclose(function(e){console.log("hint closed",e)}),intro.addHints()}function introPrijava(){(intro=introJs()).setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{intro:"Pozdravljeni v aplikaciji MyFamily, v primeru težav pri uporabi aplikacije, pošljite elektronsko sporočilo na naslov vid.cermelj@ltfe.org ali veronika.zavratnik@ltfe.org."},{intro:"Če še niste registrirani, lahko to storite s klikom na gumb Registrirajte se."}]}),intro.start()}function chooseHelp(){introPrijava()}function validatePrijava(){return""==document.forms.prijavaForm.email.value?($("#emailErr").text("Vpišite uporabniško ime!").parent().addClass("is-invalid"),!1):""==document.forms.prijavaForm.password.value?($("#passErr").text("Vpišite geslo!").parent().addClass("is-invalid"),!1):void 0}function validatePassword(){if(""==document.forms.passForm.email.value)return $("#emailErr").text("Prosimo vpišite vaš e-mail naslov!").parent().addClass("is-invalid"),!1}function validateChange(){return""==document.forms.changeForm.password.value?($("#errChange").text("Polje je obvezno").parent().addClass("is-invalid"),!1):document.forms.changeForm.password.value!=document.forms.changeForm.password_confirm.value?($("#errChange").parent().addClass("is-invalid"),!1):void 0}function checkMail(e){/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i.test(e.value)?(e.setCustomValidity(""),e.parentElement.classList.remove("is-invalid")):($("#emailErr").text("Vpisani email ni pravilen!"),$("#passErr").parent().removeClass("is-invalid"),e.setCustomValidity("Prosimo vključite '@'in '.' v email naslov!"))}function getQueryVariable(e){for(var i,a=window.location.search.substring(1).split("&"),t=0;t<a.length;t++)if((i=a[t].split("="))[0]==e)return i[1];return!1}function pregled(){var e=location.protocol+"//"+location.host;window.history.replaceState({},document.title,e),window.location.reload(!0)}$("#registracijaForm").submit(function(){return!0===validateRegistracija()&&$.ajax({url:$("#registracijaForm").attr("action"),type:"POST",data:$("#registracijaForm").serialize(),success:function(){window.location.reload(!0)},error:function(e,i,a,t){console.log(e),$("#errEmail").text(e.responseText).parent().addClass("is-invalid")}}),!1}),$("#changeForm").submit(function(){return $.ajax({url:"/api/confirm?token="+getQueryVariable("token"),type:"POST",data:$("#changeForm").serialize(),success:function(e){localStorage.setItem("Status","Geslo je bilo uspešno spremenjeno!"),window.location.reload(!0)},error:function(e){localStorage.setItem("Status",e);var i=location.protocol+"//"+location.host;window.history.replaceState({},document.title,i),window.location.reload(!0)}}),!1}),$("#passForm").submit(function(){return $.ajax({url:$("#passForm").attr("action"),type:"POST",data:$("#passForm").serialize(),success:function(e){localStorage.setItem("Status",e),window.location.reload(!0)},error:function(e){$("#emailResetErr").text(e.responseText).parent().addClass("is-invalid")}}),!1});