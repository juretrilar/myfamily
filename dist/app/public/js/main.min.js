"use strict";var config={apiKey:"AIzaSyB5gqr67VPZ1T1rgnRBYgyHZzgLhQTLMvY",authDomain:"myfamily-e6565.firebaseapp.com",databaseURL:"https://myfamily-e6565.firebaseio.com",projectId:"myfamily-e6565",storageBucket:"",messagingSenderId:"868378198566"};firebase.initializeApp(config),function(){function e(){getmdlSelect.init(".getmdl-select")}window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent&&window.attachEvent("onload",e)}();var getmdlSelect={_defaultValue:{width:300},_addEventListeners:function(i){var n=i.querySelector("input"),s=i.querySelector('input[type="hidden"]'),o=i.querySelectorAll("li"),r=i.querySelector(".mdl-js-menu"),e=i.querySelector(".mdl-icon-toggle__label"),a="",l="",d="",c=!1,h=function(e){var t=e.textContent.trim();if(n.value=t,o.forEach(function(e){e.classList.remove("selected")}),e.classList.add("selected"),i.MaterialTextfield.change(t),setTimeout(function(){i.MaterialTextfield.updateClasses_()},250),s.value=e.dataset.val||"",l=n.value,d=s.value,"createEvent"in document){var a=document.createEvent("HTMLEvents");a.initEvent("change",!1,!0),r.MaterialMenu.hide(),n.dispatchEvent(a)}else n.fireEvent("onchange")},t=function(){c=!1,n.value=l,s.value=d,i.querySelector(".mdl-menu__container").classList.contains("is-visible")||i.classList.remove("is-focused");var e=document.querySelectorAll(".getmdl-select .mdl-js-menu");[].forEach.call(e,function(e){e.MaterialMenu.hide()});var t=new Event("closeSelect");r.dispatchEvent(t)};document.body.addEventListener("click",t,!1),i.onkeydown=function(e){9==e.keyCode&&(n.value=l,s.value=d,r.MaterialMenu.hide(),i.classList.remove("is-focused"))},n.onfocus=function(e){r.MaterialMenu.show(),r.focus(),c=!0},n.onblur=function(e){e.stopPropagation()},n.onclick=function(e){e.stopPropagation(),r.classList.contains("is-visible")?(r.MaterialMenu.hide(),c=!1):(r.MaterialMenu.show(),t(),i.classList.add("is-focused"),c=!0)},n.onkeydown=function(e){27==e.keyCode&&(n.value=l,s.value=d,r.MaterialMenu.hide(),i.MaterialTextfield.onBlur_(),""!==a&&(i.querySelector(".mdl-textfield__label").textContent=a,a=""))},r.addEventListener("closeSelect",function(e){n.value=l,s.value=d,i.classList.remove("is-focused"),""!==a&&(i.querySelector(".mdl-textfield__label").textContent=a,a="")}),r.onkeydown=function(e){27==e.keyCode&&(n.value=l,s.value=d,i.classList.remove("is-focused"),""!==a&&(i.querySelector(".mdl-textfield__label").textContent=a,a=""))},e&&(e.onclick=function(e){e.stopPropagation(),c?(r.MaterialMenu.hide(),c=!1,i.classList.remove("is-focused"),i.MaterialTextfield.onBlur_(),n.value=l,s.value=d):(t(),i.MaterialTextfield.onFocus_(),n.focus(),r.MaterialMenu.show(),c=!0)}),[].forEach.call(o,function(t){t.onfocus=function(){i.classList.add("is-focused");var e=t.textContent.trim();n.value=e,i.classList.contains("mdl-textfield--floating-label")||""!=a||(a=i.querySelector(".mdl-textfield__label").textContent.trim(),i.querySelector(".mdl-textfield__label").textContent="")},t.onclick=function(){h(t)},t.dataset.selected&&h(t)})},init:function(e){var t=document.querySelectorAll(e);[].forEach.call(t,function(e){getmdlSelect._addEventListeners(e),componentHandler.upgradeElement(e),componentHandler.upgradeElement(e.querySelector("ul"))})}},_typeof8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof7="function"==typeof Symbol&&"symbol"==_typeof8(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof8(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof8(e)},_typeof6="function"==typeof Symbol&&"symbol"===_typeof7(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof7(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof7(e)},_typeof5="function"==typeof Symbol&&"symbol"===_typeof6(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof6(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof6(e)},_typeof4="function"==typeof Symbol&&"symbol"===_typeof5(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof5(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof5(e)},_typeof3="function"==typeof Symbol&&"symbol"===_typeof4(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof4(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof4(e)},_typeof2="function"==typeof Symbol&&"symbol"===_typeof3(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof3(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof3(e)},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};function prikaziPodatke(e){var t="/koledar/"+e;24==e.length&&$.ajax({type:"GET",url:t,success:function(e){console.log(e),e.includes("<!doctype html>")?window.location.reload():$("#NalogaPopUp").html(e).css("display","inline-flex")},error:function(e,t,a){alert(e.status),alert(e.responseText),alert(a)}}),event.preventDefault()}!function(l){var d={init:function(e){var t=l.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,useAnchors:!0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(e,t){},onInit:function(){}},e||{}),a=this;return t.pages=t.pages?t.pages:Math.ceil(t.items/t.itemsOnPage)?Math.ceil(t.items/t.itemsOnPage):1,t.currentPage?t.currentPage=t.currentPage-1:t.currentPage=t.invertPageOrder?t.pages-1:0,t.halfDisplayed=t.displayedPages/2,this.each(function(){a.addClass(t.cssStyle+" simple-pagination").data("pagination",t),d._draw.call(a)}),t.onInit(),this},selectPage:function(e){return d._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage<e.pages-1&&d._selectPage.call(this,e.currentPage+1):0<e.currentPage&&d._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.invertPageOrder?0<e.currentPage&&d._selectPage.call(this,e.currentPage-1):e.currentPage<e.pages-1&&d._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(e){this.data("pagination").pages=e},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var t=this.data("pagination");return t.currentPage=e-1,this.data("pagination",t),d._draw.call(this),this},redraw:function(){return d._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),d._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),d._draw.call(this),this},updateItems:function(e){var t=this.data("pagination");t.items=e,t.pages=d._getPages(t),this.data("pagination",t),d._draw.call(this)},updateItemsOnPage:function(e){var t=this.data("pagination");return t.itemsOnPage=e,t.pages=d._getPages(t),this.data("pagination",t),d._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var e,t=this.data("pagination"),a=d._getInterval(t);d.destroy.call(this);var i="UL"===("function"==typeof this.prop?this.prop("tagName"):this.attr("tagName"))?this:l("<ul"+(t.listStyle?' class="'+t.listStyle+'"':"")+"></ul>").appendTo(this);if(t.prevText&&d._appendItem.call(this,t.invertPageOrder?t.currentPage+1:t.currentPage-1,{text:t.prevText,classes:"prev"}),t.nextText&&t.nextAtFront&&d._appendItem.call(this,t.invertPageOrder?t.currentPage-1:t.currentPage+1,{text:t.nextText,classes:"next"}),t.invertPageOrder){if(a.end<t.pages&&0<t.edges){if(t.useStartEdge){var n=Math.max(t.pages-t.edges,a.end);for(e=t.pages-1;n<=e;e--)d._appendItem.call(this,e)}t.pages-t.edges>a.end&&t.pages-t.edges-a.end!=1?i.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):t.pages-t.edges-a.end==1&&d._appendItem.call(this,a.end)}}else if(0<a.start&&0<t.edges){if(t.useStartEdge){var s=Math.min(t.edges,a.start);for(e=0;e<s;e++)d._appendItem.call(this,e)}t.edges<a.start&&a.start-t.edges!=1?i.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):a.start-t.edges==1&&d._appendItem.call(this,t.edges)}if(t.invertPageOrder)for(e=a.end-1;e>=a.start;e--)d._appendItem.call(this,e);else for(e=a.start;e<a.end;e++)d._appendItem.call(this,e);if(t.invertPageOrder){if(0<a.start&&0<t.edges&&(t.edges<a.start&&a.start-t.edges!=1?i.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):a.start-t.edges==1&&d._appendItem.call(this,t.edges),t.useEndEdge))for(e=(s=Math.min(t.edges,a.start))-1;0<=e;e--)d._appendItem.call(this,e)}else if(a.end<t.pages&&0<t.edges&&(t.pages-t.edges>a.end&&t.pages-t.edges-a.end!=1?i.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):t.pages-t.edges-a.end==1&&d._appendItem.call(this,a.end),t.useEndEdge))for(e=n=Math.max(t.pages-t.edges,a.end);e<t.pages;e++)d._appendItem.call(this,e);t.nextText&&!t.nextAtFront&&d._appendItem.call(this,t.invertPageOrder?t.currentPage-1:t.currentPage+1,{text:t.nextText,classes:"next"}),t.ellipsePageSet&&!t.disabled&&d._ellipseClick.call(this,i)},_getPages:function(e){return Math.ceil(e.items/e.itemsOnPage)||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(t,e){var a,i,n=this,s=n.data("pagination"),o=l("<li></li>"),r=n.find("ul");a={text:(t=t<0?0:t<s.pages?t:s.pages-1)+1,classes:""},s.labelMap.length&&s.labelMap[t]&&(a.text=s.labelMap[t]),a=l.extend(a,e||{}),t==s.currentPage||s.disabled?(s.disabled||"prev"===a.classes||"next"===a.classes?o.addClass("disabled"):o.addClass("active"),i=l('<span class="current">'+a.text+"</span>")):(i=s.useAnchors?l('<a href="'+s.hrefTextPrefix+(t+1)+s.hrefTextSuffix+'" class="page-link">'+a.text+"</a>"):l("<span >"+a.text+"</span>")).click(function(e){return d._selectPage.call(n,t,e)}),a.classes&&i.addClass(a.classes),o.append(i),r.length?r.append(o):n.append(o)},_selectPage:function(e,t){var a=this.data("pagination");return a.currentPage=e,a.selectOnClick&&d._draw.call(this),a.onPageClick(e+1,t)},_ellipseClick:function(e){var i=this,n=this.data("pagination"),s=e.find(".ellipse");s.addClass("clickable").parent().removeClass("disabled"),s.click(function(e){if(!n.disable){var t=l(this),a=(parseInt(t.parent().prev().text(),10)||0)+1;t.html('<input type="number" min="1" max="'+n.pages+'" step="1" value="'+a+'">').find("input").focus().click(function(e){e.stopPropagation()}).keyup(function(e){var t=l(this).val();13===e.which&&""!==t?0<t&&t<=n.pages&&d._selectPage.call(i,t-1):27===e.which&&s.empty().html(n.ellipseText)}).bind("blur",function(e){var t=l(this).val();return""!==t&&d._selectPage.call(i,t-1),s.empty().html(n.ellipseText),!1})}return!1})}};l.fn.pagination=function(e){return d[e]&&"_"!=e.charAt(0)?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===e?"undefined":_typeof(e))&&e?void l.error("Method "+e+" does not exist on jQuery.pagination"):d.init.apply(this,arguments)}}(jQuery),function(F){F.fn.extend({monthly:function(e){var z=F.extend({dataType:"json",disablePast:!1,eventList:!0,events:"",jsonUrl:"",linkCalendarToEventUrl:!1,maxWidth:!1,mode:"event",setWidth:!1,showTrigger:"",startHidden:!1,stylePast:!1,target:"",useIsoDateFormat:!1,weekStart:0,xmlUrl:""},e),m=F(this).attr("id"),I="#"+m,t=new Date,g=t.getMonth()+1,v=t.getFullYear(),f=t.getDate(),d=(z.locale||(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.browserLanguage)).toLowerCase(),y=(z.monthNameFormat,z.weekdayNameFormat,z.monthNames||["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"]),k=z.dayNames||["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],b='<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>',j="Mon"===z.weekStart||1===z.weekStart||"1"===z.weekStart,a=d.substring(0,2).toLowerCase();function L(e,t){return 2===e?3&t||!(t%25)&&15&t?28:29:30+(e+(e>>3)&1)}function i(e,t){F(I).data("setMonth",e).data("setYear",t);var a=0,i=L(e,t),n=e-1,s=new Date(t,n,1,0,0,0,0).getDay(),o=e===g&&t===v;F(I+" .monthly-day, "+I+" .monthly-day-blank").remove(),F(I+" .monthly-event-list, "+I+" .monthly-day-wrap").empty();for(var r=1;r<=i;r++){var l=z.stylePast&&(t<v||t===v&&(e<g||e===g&&r<f)),d='<div class="monthly-day-number">'+r+'</div><div class="monthly-indicator-wrap" ></div>';if("event"===z.mode){var c=new Date(t,n,r,0,0,0,0);F(I+" .monthly-day-wrap").append("<div"+H("class","m-d monthly-day monthly-day-event"+(l?" monthly-past-day":"")+" dt"+c.toISOString().slice(0,10))+H("data-number",r)+">"+d+"</div>"),F(I+" .monthly-event-list").append("<div"+H("class","monthly-list-item")+H("id",m+"day"+r)+H("data-number",r)+'><div class="monthly-event-list-date">'+k[c.getDay()]+"<br>"+r+"</div></div>")}else F(I+" .monthly-day-wrap").append("<a"+H("href","#")+H("class","m-d monthly-day monthly-day-pick"+(l?" monthly-past-day":""))+H("data-number",r)+">"+d+"</a>")}o&&F(I+' *[data-number="'+f+'"]').addClass("monthly-today"),F(I+" .monthly-header-title").html('<a href="#" class="monthly-header-title-date" onclick="return false">'+y[e-1]+" "+t+"</a>"+(o&&F(I+" .monthly-event-list").hide()?"":'<a href="#" class="monthly-reset"></a>')),j?0===s?S(6):1!==s&&S(s-1):7!==s&&S(s);var h=F(I+" .monthly-day").length+F(I+" .monthly-day-blank").length,u=7*Math.ceil(h/7)-h;if(h%7!=0)for(a=0;a<u;a++)F(I+" .monthly-day-wrap").append(b);"event"===z.mode&&function(t,a){if(z.events)D(z.events,t,a);else{var e="xml"===z.dataType?z.xmlUrl:z.jsonUrl;if(e){var i=String(e).replace("{month}",t).replace("{year}",a);F.get(i,{now:F.now()},function(e){D(e,t,a)},z.dataType).fail(function(){console.error("Monthly.js failed to import "+e+". Please check for the correct path and "+z.dataType+" syntax.")})}}}(e,t);var p=F(I+" .m-d");for(a=0;a<p.length;a+=7)p.slice(a,a+7).wrapAll('<div class="monthly-week"></div>')}function n(e,t,a){var i=O(e,"startdate"),n=O(e,"enddate"),s=i.split("-"),o=parseInt(s[0],10),r=parseInt(s[1],10),l=parseInt(s[2],10),d=l,c=l,h=l,u=r===t&&o===a,p=u;if(n){var m=n.split("-"),g=parseInt(m[0],10),v=parseInt(m[1],10),f=parseInt(m[2],10),y=v===t&&g===a;(u||y||(o<a||r<t&&o===a)&&(a<g||t<v&&g===a))&&(p=!0,d=u?l:1,c=y?f:L(t,a),h=u?d:1)}if(p){var k=O(e,"starttime"),b="",j=O(e,"url"),D=O(e,"name"),S=O(e,"class"),_=O(e,"color"),w=O(e,"id"),C=S?" "+S:"",x="<div",$="</span></div>";if(k){var M=O(e,"endtime");b='<div><div class="monthly-list-time-start">'+B(k)+"</div>"+(M?'<div class="monthly-list-time-end">'+B(M)+"</div>":"")+"</div>"}z.linkCalendarToEventUrl&&j&&(x="<a"+H("href",j),$="</span></a>");for(var T,E=x+H("data-eventid",w)+H("title",D)+(_?H("style","background:"+_+";color:"+_):""),P="<a"+H("href",j)+H("class","listed-event"+C)+H("data-eventid",w)+(_?H("style","background:"+_):"")+H("title",D)+">"+D+" "+b+"</a>",N=d;N<=c;N++)T=N===h,F(I+' *[data-number="'+N+'"] .monthly-indicator-wrap').append(E+H("class","monthly-event-indicator"+C+(T?"":" monthly-event-continued"))+"><span>"+(T?D:"")+$),F(I+' .monthly-list-item[data-number="'+N+'"]').addClass("item-has-event").append(P)}}function D(e,a,i){"xml"===z.dataType?F(e).find("event").each(function(e,t){n(t,a,i)}):"json"===z.dataType&&F.each(e.monthly,function(e,t){n(t,a,i)})}function H(e,t){for(var a=String(t),i="",n=0;n<a.length;n++)switch(a[n]){case"'":i+="&#39;";break;case'"':i+="&quot;";break;case"<":i+="&lt;";break;case">":i+="&gt;";break;default:i+=a[n]}return" "+e+'="'+i+'"'}function S(e){var t=F(I+" .monthly-day-wrap"),a=0;for(a=0;a<e;a++)t.prepend(b)}function O(e,t){return"xml"===z.dataType?F(e).find(t).text():e[t]}function B(e){var t=e.split(":"),a=parseInt(t[0],10),i="AM";return 12<a?(a-=12,i="PM"):12==a?i="PM":0===a&&(a=12),a+":"+String(t[1])+" "+i}function c(){F(I+" .monthly-event-list").is(":visible")&&(F(I+" .monthly-cal").remove(),F(I+" .monthly-header-title").prepend('<a href="#" class="monthly-cal"></a>'))}!1!==z.maxWidth&&F(I).css("maxWidth",z.maxWidth),!1!==z.setWidth&&F(I).css("width",z.setWidth),z.startHidden&&(F(I).addClass("monthly-pop").css({display:"none",position:"absolute"}),F(document).on("focus",String(z.showTrigger),function(e){F(I).show(),e.preventDefault()}),F(document).on("click",String(z.showTrigger)+", .monthly-pop",function(e){e.stopPropagation(),e.preventDefault()}),F(document).on("click",function(){F(I).hide()})),function(e){var t=e?1:0,a="",i=0;for(i=0;i<6;i++)a+="<div>"+k[i+t]+"</div>";a+="<div>"+k[e?0:6]+"</div>",F(I).append('<div class="monthly-day-title-wrap">'+a+'</div><div class="monthly-day-wrap"></div>')}(j),F(I).addClass("monthly-locale-"+a+" monthly-locale-"+d),F(I).prepend('<div class="monthly-header"><div class="monthly-header-title"><a href="#" class="monthly-header-title-date" onclick="return false"></a></div><a href="#" class="monthly-prev"></a><a href="#" class="monthly-next"></a></div>').append('<div class="monthly-event-list"></div>'),i(g,v),F(document.body).on("click",I+" .monthly-next",function(e){var t,a;t=F(I).data("setMonth"),a=F(I).data("setYear"),i(12===t?1:t+1,12===t?a+1:a),c(),e.preventDefault()}),F(document.body).on("click",I+" .monthly-prev",function(e){var t,a;t=F(I).data("setMonth"),a=F(I).data("setYear"),i(1===t?12:t-1,1===t?a-1:a),c(),e.preventDefault()}),F(document.body).on("click",I+" .monthly-reset",function(e){F(this).remove(),i(g,v),c(),e.preventDefault(),e.stopPropagation()}),F(document.body).on("click",I+" .monthly-cal",function(e){F(this).remove(),F(I+" .monthly-event-list").css("transform","scale(0)"),setTimeout(function(){F(I+" .monthly-event-list").hide()},250),e.preventDefault(),F("#NalogaPopUp").css("display","none")}),F(document.body).on("click touchstart",I+" .monthly-day",function(e){var t,a,i,n=F(this).data("number");if("event"===z.mode&&z.eventList){var s=F(I+" .monthly-event-list"),o=document.getElementById(m+"day"+n).offsetTop;s.show(),s.css("transform"),s.css("transform","scale(1)"),F(I+" .monthly-event-list .monthly-list-item").hide(),F(I+' .monthly-list-item[data-number="'+n+'"]').show(),s.scrollTop(o),c(),z.linkCalendarToEventUrl||e.preventDefault(),"SPAN"==e.target.nodeName?prikaziPodatke(e.target.parentElement.getAttribute("data-eventid")):prikaziPodatke(e.target.attributes[0].value)}else if("picker"===z.mode){var r=F(I).data("setMonth"),l=F(I).data("setYear");F(this).hasClass("monthly-past-day")&&z.disablePast?e.preventDefault():(F(String(z.target)).val((t=l,a=r,i=n,z.useIsoDateFormat?new Date(t,a-1,i,0,0,0).toISOString().substring(0,10):"undefined"==typeof Intl?a+"/"+i+"/"+t:new Intl.DateTimeFormat(d).format(new Date(t,a-1,i,0,0,0)))),0!=F("#targetZacetek").val().length&&F("#dialogZacetek").addClass("is-dirty"),0!=F("#targetKonec").val().length&&F("#dialogKonec").addClass("is-dirty"),z.startHidden&&F(I).hide()),e.preventDefault()}}),F(document.body).on("click",I+" .listed-event",function(e){var t=F(this).attr("href");t&&F.ajax({type:"GET",url:t,success:function(e){e.includes("<!doctype html>")?window.location.reload():(F("#NalogaPopUp").html(e).css("display","inline-flex"),F("body").click(function(e){"NalogaPopUp"==e.target.id||F(e.target).parents("#NalogaPopUp").length||(F("#NalogaPopUp").hide(),F("#NalogaPopUp").unbind())}))},error:function(e,t,a){console.log(e.status),console.log(e.responseText),console.log(a)}}),e.preventDefault()})}})}(jQuery);_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var i=window.CustomEvent;function n(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function a(e){e&&e.blur&&e!==document.body&&e.blur()}function d(e,t){for(var a=0;a<e.length;++a)if(e[a]===t)return!0;return!1}function s(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function t(a){if(this.dialog_=a,this.replacedStyleTop_=!1,this.openAsModal_=!1,a.hasAttribute("role")||a.setAttribute("role","dialog"),a.show=this.show.bind(this),a.showModal=this.showModal.bind(this),a.close=this.close.bind(this),"returnValue"in a||(a.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(a,{attributes:!0,attributeFilter:["open"]});else{var i,n=!1,s=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),t=function(e){if(e.target===a){var t="DOMNodeRemoved";n|=e.type.substr(0,t.length)===t,window.clearTimeout(i),i=window.setTimeout(s,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(e){a.addEventListener(e,t)})}Object.defineProperty(a,"open",{set:this.setOpen.bind(this),get:a.hasAttribute.bind(a,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}i&&"object"!==(void 0===i?"undefined":_typeof(i))||((i=function(e,t){t=t||{};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),a}).prototype=window.Event.prototype),t.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),o.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var a=document.createEvent("MouseEvents");a.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(a),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&0<=this.dialog_.tabIndex&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}a(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!o.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var a=window.getComputedStyle(e),t=function(e,t){return!(void 0===a[e]||a[e]===t)};if(a.opacity<1||t("zIndex","auto")||t("transform","none")||t("mixBlendMode","normal")||t("filter","none")||t("perspective","none")||"isolate"===a.isolation||"fixed"===a.position||"touch"===a.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,o.needsCentering(this.dialog_)?(o.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new i("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var o={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,a=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,a)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var a=document.styleSheets[t],i=null;try{i=a.cssRules}catch(e){}if(i)for(var n=0;n<i.length;++n){var s=i[n],o=null;try{o=document.querySelectorAll(s.selectorText)}catch(e){}if(o&&d(o,e)){var r=s.style.getPropertyValue("top"),l=s.style.getPropertyValue("bottom");if(r&&"auto"!==r||l&&"auto"!==l)return!0}}}return!1},needsCentering:function(e){return!("absolute"!==window.getComputedStyle(e).position||"auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom||o.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new t(e)},registerDialog:function(e){e.showModal||o.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(e){var i=[];e.forEach(function(e){for(var t,a=0;t=e.removedNodes[a];++a)t instanceof Element&&("dialog"===t.localName&&i.push(t),i=i.concat(t.querySelectorAll("dialog")))}),i.length&&t(i)}))}};if(o.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},o.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},o.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,a=0;e=this.pendingDialogStack[a];++a)e.updateZIndex(--t,--t),0===a&&(this.overlay.style.zIndex=--t);var i=this.pendingDialogStack[0];i?(i.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},o.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=n(e);){for(var t,a=0;t=this.pendingDialogStack[a];++a)if(t.dialog===e)return 0===a;e=e.parentElement}return!1},o.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),a(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},o.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new i("cancel",{bubbles:!1,cancelable:!0}),a=this.pendingDialogStack[0];a&&a.dialog.dispatchEvent(t)&&a.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},o.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach(function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()})},o.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t||(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),0))},o.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},o.dm=new o.DialogManager,o.formSubmitter=null,o.useValue=null,void 0===window.HTMLDialogElement){var e=document.createElement("form");if(e.setAttribute("method","dialog"),"dialog"!==e.method){var r=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(r){var l=r.get;r.get=function(){return s(this)?"dialog":l.call(this)};var c=r.set;r.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):c.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",r)}}document.addEventListener("click",function(e){if(o.formSubmitter=null,o.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&s(t.form)){if(!("submit"===t.type&&-1<["button","input"].indexOf(t.localName))){if("input"!==t.localName||"image"!==t.type)return;o.useValue=e.offsetX+","+e.offsetY}n(t)&&(o.formSubmitter=t)}}},!1);var h=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!s(this))return h.call(this);var e=n(this);e&&e.close()},document.addEventListener("submit",function(e){var t=e.target;if(s(t)){e.preventDefault();var a=n(t);if(a){var i=o.formSubmitter;i&&i.form===t?a.close(o.useValue||i.value):a.close(),o.formSubmitter=null}}},!0)}o.forceRegisterDialog=o.forceRegisterDialog,o.registerDialog=o.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return o}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=o:window.dialogPolyfill=o}();var $paginator=void 0,items=void 0;function clearField(e,t){getmdlSelect.init(".mdl-filter"+e),document.getElementsByClassName("mdl-filter"+e)[0].classList.remove("is-dirty"),t.style.display="none"}function objaviStatus(){var e=$("#trenutniUporabnik").val();if(""!=$("#currStatus").val()){$("#status"+e).text($("#currStatus").val()).parent().removeClass("hide-element");var t={currStatus:$("#currStatus").val()};$.ajax({url:"/status",type:"POST",contentType:"application/json",data:JSON.stringify(t),success:function(){$("#currStatus").val(""),document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Status je bil uspešno posodobljen!"})},error:function(e,t,a){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Prišlo je do napake, status ni bil shranjen!"})}})}else $("#status"+e).parent.addClass("hide-element")}function updateItems(){items=$(".paginate"),$paginator.pagination("updateItems",items.length);var e=Math.min($paginator.pagination("getCurrentPage"),$paginator.pagination("getPagesCount"));$paginator.pagination("selectPage",e),24<items.length&&$("#pagination").attr("style","display: list-view")}function queryNaloge(){$("body").css("cursor","progress");var e={};""!=$("input[name='osebaSearch']").val()&&(e.oseba=$("input[name='osebaSearch']").val()),""!=$("input[name='statusSearch']").val()&&(e.status=$("input[name='statusSearch']").val()),""!=$("input[name='kategorijaSearch']").val()&&(e.kategorija=$("input[name='kategorijaSearch']").val()),""!=$("input[name='avtorSearch']").val()&&(e.avtor=$("input[name='avtorSearch']").val()),""!=$("input[name='koledarSearch']").val()&&(e.koledar=$("input[name='koledarSearch']").val()),""!=$("input[name='ciljSearch']").val()&&(e.cilj=$("input[name='ciljSearch']").val()),$.ajax({url:"/prikazi_naloge",type:"POST",data:e,success:function(e,t){$("body").css("cursor","default"),e.includes("<!doctype html>")?window.location.reload():0==e.length?document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Nobena naloga ne ustreza iskalnim parametrom!"}):($("#nalogeGrid").html(e),updateItems(),function(e,t){var a=document.getElementById("nalogeGrid").getElementsByClassName("mdl-card"),i=void 0;for(i=0;i<a.length;i++)a[i].getElementsByTagName("button")[0].onclick=function(e){return function(){t(e,event)}}(a[i])}(0,function(e,t){currentElement=e,posodobiNalogo(),$("#newDialog").val(e.getElementsByClassName("idNaloga")[0].value),$("#imeDialog").val(e.getElementsByClassName("queryIme")[0].innerHTML).parent().addClass("is-dirty"),$("#opisDialog").val(e.getElementsByClassName("queryOpis")[0].innerHTML).parent().addClass("is-dirty");var a=void 0,i=void 0;try{a=e.getElementsByClassName("dateNaloga")[0].innerHTML,i=e.getElementsByClassName("dateNaloga")[1].innerHTML}catch(e){console.log(e)}a&&($("#targetZacetek").val(a).parent().addClass("is-dirty"),$("#dateZacetek").val(moment(a.replace(" ob "," "),"DD-MM-Y HH:mm").format("Y-MM-DD HH:mm"))),i&&($("#targetKonec").val(i).parent().addClass("is-dirty"),$("#dateKonec").val(moment(i.replace(" ob "," "),"DD-MM-Y HH:mm").format("Y-MM-DD HH:mm")));var n=e.getElementsByClassName("kategorijaNaloga")[0].value;$("#kategorija").get(0).placeholder=$(".list-kategorija").find("[data-val='"+n+"']").get(0).textContent.trim(),$("input[name='sampleKategorija']").parent().addClass("is-dirty").find("li[data-val='"+n+"']").attr("data-selected","true"),getmdlSelect.init("#dialogKategorija");var s=e.getElementsByClassName("ciljNaloga")[0].value;$("#vezanCilj").get(0).placeholder=$(".list-cilj").find("[data-val='"+s+"']").get(0).textContent.trim(),$("input[name='sampleCilj']").parent().addClass("is-dirty").find("li[data-val='"+s+"']").attr("data-selected","true"),$("input[name='oldCilj']").val(s),getmdlSelect.init("#dialogCilj");var o=e.getElementsByClassName("statusNaloga")[0].innerHTML;"Neopravljena"==($("#statusNaloge").get(0).placeholder=o)?($("#statusNaloge").parent().addClass("is-dirty").find("li[data-val='false']").attr("data-selected","true"),$("input[name='oldStatus']").val("false"),$("input[name='newStatus']").val("false")):($("#statusNaloge").parent().addClass("is-dirty").find("li[data-val='true']").attr("data-selected","true"),$("input[name='oldStatus']").val("true"),$("input[name='newStatus']").val("true")),getmdlSelect.init("#dialogStatus"),$("#xpNaloge").val(e.getElementsByClassName("xpNaloga")[0].innerHTML.match(/\d/g).join("")).parent().addClass("is-dirty");for(var r=e.getElementsByClassName("udelezenecNaloga"),l=$("input:checkbox[name='person']"),d=[],c=1;c<l.length;c++)d.push($("#"+l[c].id).val());$("#checkboxVsi").parent()[0].MaterialCheckbox.uncheck(),l.length-1==r.length&&$("#checkboxVsi").parent()[0].MaterialCheckbox.check();for(var h=0,u=1;u<l.length;u++)$("#"+l[u].id).parent()[0].MaterialCheckbox.uncheck();for(;h<r.length;){var p=d.indexOf(r[h].value);-1!==p&&($("#"+l[p+1].id).parent()[0].MaterialCheckbox.check(),h++)}t.stopPropagation()}))},error:function(e,t,a){$("body").css("cursor","default"),console.log(e.status,e.responseText,a),document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:"Med nalaganjem nalog je prišlo do napake!"})}}),updateItems()}jQuery(function(s){s("#osebaSearch").get(0).onchange=function(){s("#chipOseba").attr("style","display: inline-block;").find("span:first-child").text(s(this).val())},s("#statusSearch").get(0).onchange=function(){s("#chipStatus").attr("style","display: inline-block;").find("span:first-child").text(s(this).val())},s("#kategorijaSearch").get(0).onchange=function(){s("#chipKategorija").attr("style","display: inline-block;").find("span:first-child").text(s(this).val())},s("#avtorSearch").get(0).onchange=function(){s("#chipAvtor").attr("style","display: inline-block;").find("span:first-child").text(s(this).val())},s("#koledarSearch").get(0).onchange=function(){s("#chipKoledar").attr("style","display: inline-block;").find("span:first-child").text(s(this).val())},s("#ciljSearch").get(0).onchange=function(){s("#chipCilj").attr("style","display: inline-block;").find("span:first-child").text(s(this).val())},($paginator=s("#pagination")).pagination({itemsOnPage:24,cssStyle:"light-theme",onPageClick:function(e){var t=s(document).width(),a=24*(e-1),i=a+24;s(".naloge-center").attr("style","display: none!important");for(var n=a;n<=i;n++)1440<t?(s("#cellHa"+n).attr("style","display: block!important"),s("#cellHb"+n).attr("style","display: block!important")):840<t&&(s("#cellPa"+n).attr("style","display: block!important"),s("#cellPb"+n).attr("style","display: block!important"));items.hide().slice(a,i).show()}}),s("#filter").click(function(){queryNaloge()}),s("#reset").click(function(){getmdlSelect.init(".mdl-filter"),s(".selected").removeClass("selected"),s("input[name='osebaSearch']").val("").parent().removeClass("is-dirty"),s("#statusSearch").val("").parent().removeClass("is-dirty"),s("input[name='kategorijaSearch']").val("").parent().removeClass("is-dirty"),s("input[name='avtorSearch']").val("").parent().removeClass("is-dirty"),s("#koledarSearch").val("").parent().removeClass("is-dirty"),s("#ciljSearch").val("").parent().removeClass("is-dirty")}),queryNaloge(),s("#menuDashboard").addClass("is-active"),s("#dashboard").addClass("is-active")});_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,o,s){var a,i,m,n,t,r,l,d,c,h,u,p,g,v,f;r={classes:"",inline:t=!(n="datepicker"),language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},l={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},(m=d=function(e,t){this.el=e,this.$el=o(e),this.opts=o.extend(!0,{},r,t,this.$el.data()),a==s&&(a=o("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?o(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()}).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){t||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new o.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new o.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new o.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),o(e).on("resize.adp",this._onResize.bind(this)),o("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(e){return-1!==this.opts.weekends.indexOf(e)},_defineLocale:function(e){"string"==typeof e?(this.loc=o.fn.datepicker.language[e],this.loc||(console.warn("Can't find language \""+e+'" in Datepicker.language, will use "ru" instead'),this.loc=o.extend(!0,{},o.fn.datepicker.language.ru)),this.loc=o.extend(!0,{},o.fn.datepicker.language.ru,o.fn.datepicker.language[e])):this.loc=o.extend(!0,{},o.fn.datepicker.language.ru,e),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var t=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(t("aa"))||this.loc.timeFormat.match(t("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){t=!0,a.append('<div class="datepickers-container" id="datepickers-container"></div>'),i=o("#datepickers-container")},_buildBaseHtml:function(){var e,t=o('<div class="datepicker-inline">');e="INPUT"==this.el.nodeName?this.opts.inline?t.insertAfter(this.$el):i:t.appendTo(this.$el),this.$datepicker=o('<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo(e),this.$content=o(".datepicker--content",this.$datepicker),this.$nav=o(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var e,t=this.selectedDates,a=m.getParsedDate(t[0]),i=this,n=new Date(a.year,a.month,a.date,a.hours,a.minutes);e=t.map(function(e){return i.formatDate(i.loc.dateFormat,e)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(n=t.map(function(e){var t=m.getParsedDate(e);return new Date(t.year,t.month,t.date,t.hours,t.minutes)})),this._prevOnSelectValue=e,this.opts.onSelect(e,n,this)},next:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month+1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year+1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year+10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},prev:function(){var e=this.parsedDate,t=this.opts;switch(this.view){case"days":this.date=new Date(e.year,e.month-1,1),t.onChangeMonth&&t.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(e.year-1,e.month,1),t.onChangeYear&&t.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(e.year-10,0,1),t.onChangeDecade&&t.onChangeDecade(this.curDecade)}},formatDate:function(e,t){t=t||this.date;var a,i=e,n=this._getWordBoundaryRegExp,s=this.loc,o=m.getLeadingZeroNum,r=m.getDecade(t),l=m.getParsedDate(t),d=l.fullHours,c=l.hours,h=e.match(n("aa"))||e.match(n("AA")),u="am",p=this._replacer;switch(this.opts.timepicker&&this.timepicker&&h&&(d=o((a=this.timepicker._getValidHoursFromDate(t,h)).hours),c=a.hours,u=a.dayPeriod),!0){case/@/.test(i):i=i.replace(/@/,t.getTime());case/aa/.test(i):i=p(i,n("aa"),u);case/AA/.test(i):i=p(i,n("AA"),u.toUpperCase());case/dd/.test(i):i=p(i,n("dd"),l.fullDate);case/d/.test(i):i=p(i,n("d"),l.date);case/DD/.test(i):i=p(i,n("DD"),s.days[l.day]);case/D/.test(i):i=p(i,n("D"),s.daysShort[l.day]);case/mm/.test(i):i=p(i,n("mm"),l.fullMonth);case/m/.test(i):i=p(i,n("m"),l.month+1);case/MM/.test(i):i=p(i,n("MM"),this.loc.months[l.month]);case/M/.test(i):i=p(i,n("M"),s.monthsShort[l.month]);case/ii/.test(i):i=p(i,n("ii"),l.fullMinutes);case/i/.test(i):i=p(i,n("i"),l.minutes);case/hh/.test(i):i=p(i,n("hh"),d);case/h/.test(i):i=p(i,n("h"),c);case/yyyy/.test(i):i=p(i,n("yyyy"),l.year);case/yyyy1/.test(i):i=p(i,n("yyyy1"),r[0]);case/yyyy2/.test(i):i=p(i,n("yyyy2"),r[1]);case/yy/.test(i):i=p(i,n("yy"),l.year.toString().slice(-2))}return i},_replacer:function(e,t,n){return e.replace(t,function(e,t,a,i){return t+n+i})},_getWordBoundaryRegExp:function(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")},selectDate:function(e){var t=this,a=t.opts,i=t.parsedDate,n=t.selectedDates.length,s="";if(Array.isArray(e))e.forEach(function(e){t.selectDate(e)});else if(e instanceof Date){if(this.lastSelectedDate=e,this.timepicker&&this.timepicker._setTime(e),t._trigger("selectDate",e),this.timepicker&&(e.setHours(this.timepicker.hours),e.setMinutes(this.timepicker.minutes)),"days"==t.view&&e.getMonth()!=i.month&&a.moveToOtherMonthsOnSelect&&(s=new Date(e.getFullYear(),e.getMonth(),1)),"years"==t.view&&e.getFullYear()!=i.year&&a.moveToOtherYearsOnSelect&&(s=new Date(e.getFullYear(),0,1)),s&&(t.silent=!0,t.date=s,t.silent=!1,t.nav._render()),a.multipleDates&&!a.range){if(n===a.multipleDates)return;t._isSelected(e)||t.selectedDates.push(e)}else a.range?2==n?(t.selectedDates=[e],t.minRange=e,t.maxRange=""):1==n?(t.selectedDates.push(e),t.maxRange?t.minRange=e:t.maxRange=e,m.bigger(t.maxRange,t.minRange)&&(t.maxRange=t.minRange,t.minRange=e),t.selectedDates=[t.minRange,t.maxRange]):(t.selectedDates=[e],t.minRange=e):t.selectedDates=[e];t._setInputValue(),a.onSelect&&t._triggerOnChange(),a.autoClose&&!this.timepickerIsActive&&(a.multipleDates||a.range?a.range&&2==t.selectedDates.length&&t.hide():t.hide()),t.views[this.currentView]._render()}},removeDate:function(a){var i=this.selectedDates,n=this;if(a instanceof Date)return i.some(function(e,t){if(m.isSame(e,a))return i.splice(t,1),n.selectedDates.length?n.lastSelectedDate=n.selectedDates[n.selectedDates.length-1]:(n.minRange="",n.maxRange="",n.lastSelectedDate=""),n.views[n.currentView]._render(),n._setInputValue(),n.opts.onSelect&&n._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(e,t){var a=arguments.length,i=this.lastSelectedDate;return 2==a?this.opts[e]=t:1==a&&"object"==(void 0===e?"undefined":_typeof(e))&&(this.opts=o.extend(!0,this.opts,e)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(i&&this.timepicker._handleDate(i),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),i&&(i.setHours(this.timepicker.hours),i.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var e=this.date.getTime();this.silent=!0,this.minTime>e&&(this.date=this.minDate),this.maxTime<e&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(t,a){var i=!1;return this.selectedDates.some(function(e){if(m.isSame(e,t,a))return i=e,!0}),i},_setInputValue:function(){var e,t=this,a=t.opts,i=t.loc.dateFormat,n=a.altFieldDateFormat,s=t.selectedDates.map(function(e){return t.formatDate(i,e)});a.altField&&t.$altField.length&&(e=(e=this.selectedDates.map(function(e){return t.formatDate(n,e)})).join(this.opts.multipleDatesSeparator),this.$altField.val(e)),s=s.join(this.opts.multipleDatesSeparator),this.$el.val(s)},_isInRange:function(e,t){var a=e.getTime(),i=m.getParsedDate(e),n=m.getParsedDate(this.minDate),s=m.getParsedDate(this.maxDate),o=new Date(i.year,i.month,n.date).getTime(),r=new Date(i.year,i.month,s.date).getTime(),l={day:a>=this.minTime&&a<=this.maxTime,month:o>=this.minTime&&r<=this.maxTime,year:i.year>=n.year&&i.year<=s.year};return t?l[t]:l.day},_getDimensions:function(e){var t=e.offset();return{width:e.outerWidth(),height:e.outerHeight(),left:t.left,top:t.top}},_getDateFromCell:function(e){var t=this.parsedDate,a=e.data("year")||t.year,i=e.data("month")==s?t.month:e.data("month"),n=e.data("date")||1;return new Date(a,i,n)},_setPositionClasses:function(e){var t=(e=e.split(" "))[0],a="datepicker -"+t+"-"+e[1]+"- -from-"+t+"-";this.visible&&(a+=" active"),this.$datepicker.removeAttr("class").addClass(a)},setPosition:function(e){e=e||this.opts.position;var t,a,i=this._getDimensions(this.$el),n=this._getDimensions(this.$datepicker),s=e.split(" "),o=this.opts.offset,r=s[0],l=s[1];switch(r){case"top":t=i.top-n.height-o;break;case"right":a=i.left+i.width+o;break;case"bottom":t=i.top+i.height+o;break;case"left":a=i.left-n.width-o}switch(l){case"top":t=i.top;break;case"right":a=i.left+i.width-n.width;break;case"bottom":t=i.top+i.height-n.height;break;case"left":a=i.left;break;case"center":/left|right/.test(r)?t=i.top+i.height/2-n.height/2:a=i.left+i.width/2-n.width/2}this.$datepicker.css({left:a,top:t})},show:function(){var e=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,e&&this._bindVisionEvents(e)},hide:function(){var e=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),e&&this._bindVisionEvents(e)},down:function(e){this._changeView(e,"down")},up:function(e){this._changeView(e,"up")},_bindVisionEvents:function(e){this.$datepicker.off("transitionend.dp"),e(this,!1),this.$datepicker.one("transitionend.dp",e.bind(this,this,!0))},_changeView:function(e,t){e=e||this.focused||this.date;var a="up"==t?this.viewIndex+1:this.viewIndex-1;2<a&&(a=2),a<0&&(a=0),this.silent=!0,this.date=new Date(e.getFullYear(),e.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[a]},_handleHotKey:function(e){var t,a,i,n=m.getParsedDate(this._getFocusedDate()),s=this.opts,o=!1,r=!1,l=!1,d=n.year,c=n.month,h=n.date;switch(e){case"ctrlRight":case"ctrlUp":c+=1,o=!0;break;case"ctrlLeft":case"ctrlDown":c-=1,o=!0;break;case"shiftRight":case"shiftUp":r=!0,d+=1;break;case"shiftLeft":case"shiftDown":r=!0,d-=1;break;case"altRight":case"altUp":l=!0,d+=10;break;case"altLeft":case"altDown":l=!0,d-=10;break;case"ctrlShiftUp":this.up()}i=m.getDaysCount(new Date(d,c)),a=new Date(d,c,h),i<h&&(h=i),a.getTime()<this.minTime?a=this.minDate:a.getTime()>this.maxTime&&(a=this.maxDate),this.focused=a,t=m.getParsedDate(a),o&&s.onChangeMonth&&s.onChangeMonth(t.month,t.year),r&&s.onChangeYear&&s.onChangeYear(t.year),l&&s.onChangeDecade&&s.onChangeDecade(this.curDecade)},_registerKey:function(t){this.keys.some(function(e){return e==t})||this.keys.push(t)},_unRegisterKey:function(e){var t=this.keys.indexOf(e);this.keys.splice(t,1)},_isHotKeyPressed:function(){var e,t=!1,a=this.keys.sort();for(var i in l)e=l[i],a.length==e.length&&e.every(function(e,t){return e==a[t]})&&(this._trigger("hotKey",i),t=!0);return t},_trigger:function(e,t){this.$el.trigger(e,t)},_focusNextCell:function(e,t){t=t||this.cellType;var a=m.getParsedDate(this._getFocusedDate()),i=a.year,n=a.month,s=a.date;if(!this._isHotKeyPressed()){switch(e){case 37:"day"==t&&(s-=1),"month"==t&&(n-=1),"year"==t&&(i-=1);break;case 38:"day"==t&&(s-=7),"month"==t&&(n-=3),"year"==t&&(i-=4);break;case 39:"day"==t&&(s+=1),"month"==t&&(n+=1),"year"==t&&(i+=1);break;case 40:"day"==t&&(s+=7),"month"==t&&(n+=3),"year"==t&&(i+=4)}var o=new Date(i,n,s);o.getTime()<this.minTime?o=this.minDate:o.getTime()>this.maxTime&&(o=this.maxDate),this.focused=o}},_getFocusedDate:function(){var e=this.focused||this.selectedDates[this.selectedDates.length-1],t=this.parsedDate;if(!e)switch(this.view){case"days":e=new Date(t.year,t.month,(new Date).getDate());break;case"months":e=new Date(t.year,t.month,1);break;case"years":e=new Date(t.year,0,1)}return e},_getCell:function(e,t){t=t||this.cellType;var a,i=m.getParsedDate(e),n='.datepicker--cell[data-year="'+i.year+'"]';switch(t){case"month":n='[data-month="'+i.month+'"]';break;case"day":n+='[data-month="'+i.month+'"][data-date="'+i.date+'"]'}return(a=this.views[this.currentView].$el.find(n)).length?a:o("")},destroy:function(){var e=this;e.$el.off(".adp").data("datepicker",""),e.selectedDates=[],e.focused="",e.views={},e.keys=[],e.minRange="",e.maxRange="",e.opts.inline||!e.elIsInput?e.$datepicker.closest(".datepicker-inline").remove():e.$datepicker.remove()},_handleAlreadySelectedDates:function(e,t){this.opts.range?this.opts.toggleSelected?this.removeDate(t):2!=this.selectedDates.length&&this._trigger("clickCell",t):this.opts.toggleSelected&&this.removeDate(t),this.opts.toggleSelected||(this.lastSelectedDate=e,this.opts.timepicker&&(this.timepicker._setTime(e),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var t=e.which;if(this._registerKey(t),37<=t&&t<=40&&(e.preventDefault(),this._focusNextCell(t)),13==t&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var a=this._isSelected(this.focused,this.cellType);if(!a)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(a,this.focused)}}27==t&&this.hide()},_onKeyUp:function(e){var t=e.which;this._unRegisterKey(t)},_onHotKey:function(e,t){this._handleHotKey(t)},_onMouseEnterCell:function(e){var t=o(e.target).closest(".datepicker--cell"),a=this._getDateFromCell(t);this.silent=!0,this.focused&&(this.focused=""),t.addClass("-focus-"),this.focused=a,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",m.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){o(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,t,a){var i=new Date,n=!1;this.selectedDates.length&&(n=!0,i=this.lastSelectedDate),i.setHours(t),i.setMinutes(a),n||this._getCell(i).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(i)},_onClickCell:function(e,t){this.timepicker&&(t.setHours(this.timepicker.hours),t.setMinutes(this.timepicker.minutes)),this.selectDate(t)},set focused(e){if(!e&&this.focused){var t=this._getCell(this.focused);t.length&&t.removeClass("-focus-")}this._focused=e,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",m.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=e)},get focused(){return this._focused},get parsedDate(){return m.getParsedDate(this.date)},set date(e){if(e instanceof Date)return this.currentDate=e,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),e},get date(){return this.currentDate},set view(e){if(this.viewIndex=this.viewIndexes.indexOf(e),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=e,this.inited&&(this.views[e]?this.views[e]._render():this.views[e]=new o.fn.datepicker.Body(this,e,this.opts),this.views[this.prevView].hide(),this.views[e].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(e),this.elIsInput&&this.visible&&this.setPosition()),e},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var e=m.getParsedDate(this.minDate);return new Date(e.year,e.month,e.date).getTime()},get maxTime(){var e=m.getParsedDate(this.maxDate);return new Date(e.year,e.month,e.date).getTime()},get curDecade(){return m.getDecade(this.date)}},m.getDaysCount=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},m.getParsedDate=function(e){return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:e.getHours(),fullHours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}},m.getDecade=function(e){var t=10*Math.floor(e.getFullYear()/10);return[t,t+9]},m.template=function(e,a){return e.replace(/#\{([\w]+)\}/g,function(e,t){if(a[t]||0===a[t])return a[t]})},m.isSame=function(e,t,a){if(!e||!t)return!1;var i=m.getParsedDate(e),n=m.getParsedDate(t),s=a||"day";return{day:i.date==n.date&&i.month==n.month&&i.year==n.year,month:i.month==n.month&&i.year==n.year,year:i.year==n.year}[s]},m.less=function(e,t,a){return!(!e||!t)&&t.getTime()<e.getTime()},m.bigger=function(e,t,a){return!(!e||!t)&&t.getTime()>e.getTime()},m.getLeadingZeroNum=function(e){return parseInt(e)<10?"0"+e:e},m.resetTime=function(e){if("object"==(void 0===e?"undefined":_typeof(e)))return e=m.getParsedDate(e),new Date(e.year,e.month,e.date)},o.fn.datepicker=function(t){return this.each(function(){if(o.data(this,n)){var e=o.data(this,n);e.opts=o.extend(!0,e.opts,t),e.update()}else o.data(this,n,new d(this,t))})},o.fn.datepicker.Constructor=d,o.fn.datepicker.language={ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},o(function(){o(".datepicker-here").datepicker()}),c={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},h=o.fn.datepicker,u=h.Constructor,h.Body=function(e,t,a){this.d=e,this.type=t,this.opts=a,this.$el=o(""),this.opts.onlyTimepicker||this.init()},h.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",o.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=o(c[this.type]).appendTo(this.d.$content),this.$names=o(".datepicker--days-names",this.$el),this.$cells=o(".datepicker--cells",this.$el)},_getDayNamesHtml:function(e,t,a,i){return a=a||"",7<(i=i!=s?i:0)?a:7==(t=t!=s?t:e)?this._getDayNamesHtml(e,0,a,++i):(a+='<div class="datepicker--day-name'+(this.d.isWeekend(t)?" -weekend-":"")+'">'+this.d.loc.daysMin[t]+"</div>",this._getDayNamesHtml(e,++t,a,++i))},_getCellContents:function(e,t){var a="datepicker--cell datepicker--cell-"+t,i=new Date,n=this.d,s=u.resetTime(n.minRange),o=u.resetTime(n.maxRange),r=n.opts,l=u.getParsedDate(e),d={},c=l.date;switch(t){case"day":n.isWeekend(l.day)&&(a+=" -weekend-"),l.month!=this.d.parsedDate.month&&(a+=" -other-month-",r.selectOtherMonths||(a+=" -disabled-"),r.showOtherMonths||(c=""));break;case"month":c=n.loc[n.opts.monthsField][l.month];break;case"year":var h=n.curDecade;c=l.year,(l.year<h[0]||l.year>h[1])&&(a+=" -other-decade-",r.selectOtherYears||(a+=" -disabled-"),r.showOtherYears||(c=""))}return r.onRenderCell&&(c=(d=r.onRenderCell(e,t)||{}).html?d.html:c,a+=d.classes?" "+d.classes:""),r.range&&(u.isSame(s,e,t)&&(a+=" -range-from-"),u.isSame(o,e,t)&&(a+=" -range-to-"),1==n.selectedDates.length&&n.focused?((u.bigger(s,e)&&u.less(n.focused,e)||u.less(o,e)&&u.bigger(n.focused,e))&&(a+=" -in-range-"),u.less(o,e)&&u.isSame(n.focused,e)&&(a+=" -range-from-"),u.bigger(s,e)&&u.isSame(n.focused,e)&&(a+=" -range-to-")):2==n.selectedDates.length&&u.bigger(s,e)&&u.less(o,e)&&(a+=" -in-range-")),u.isSame(i,e,t)&&(a+=" -current-"),n.focused&&u.isSame(e,n.focused,t)&&(a+=" -focus-"),n._isSelected(e,t)&&(a+=" -selected-"),n._isInRange(e,t)&&!d.disabled||(a+=" -disabled-"),{html:c,classes:a}},_getDaysHtml:function(e){for(var t,a,i=u.getDaysCount(e),n=new Date(e.getFullYear(),e.getMonth(),1).getDay(),s=new Date(e.getFullYear(),e.getMonth(),i).getDay(),o=n-this.d.loc.firstDay,r=6-s+this.d.loc.firstDay,l="",d=1-(o=o<0?o+7:o),c=i+(r=6<r?r-7:r);d<=c;d++)a=e.getFullYear(),t=e.getMonth(),l+=this._getDayHtml(new Date(a,t,d));return l},_getDayHtml:function(e){var t=this._getCellContents(e,"day");return'<div class="'+t.classes+'" data-date="'+e.getDate()+'" data-month="'+e.getMonth()+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_getMonthsHtml:function(e){for(var t="",a=u.getParsedDate(e),i=0;i<12;)t+=this._getMonthHtml(new Date(a.year,i)),i++;return t},_getMonthHtml:function(e){var t=this._getCellContents(e,"month");return'<div class="'+t.classes+'" data-month="'+e.getMonth()+'">'+t.html+"</div>"},_getYearsHtml:function(e){u.getParsedDate(e);for(var t=u.getDecade(e),a="",i=t[0]-1;i<=t[1]+1;i++)a+=this._getYearHtml(new Date(i,0));return a},_getYearHtml:function(e){var t=this._getCellContents(e,"year");return'<div class="'+t.classes+'" data-year="'+e.getFullYear()+'">'+t.html+"</div>"},_renderTypes:{days:function(){var e=this._getDayNamesHtml(this.d.loc.firstDay),t=this._getDaysHtml(this.d.currentDate);this.$cells.html(t),this.$names.html(e)},months:function(){var e=this._getMonthsHtml(this.d.currentDate);this.$cells.html(e)},years:function(){var e=this._getYearsHtml(this.d.currentDate);this.$cells.html(e)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var a,i,n,e=o(".datepicker--cell",this.$cells),s=this;e.each(function(e,t){i=o(this),n=s.d._getDateFromCell(o(this)),a=s._getCellContents(n,s.d.cellType),i.attr("class",a.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(e){var t=e.data("date")||1,a=e.data("month")||0,i=e.data("year")||this.d.parsedDate.year,n=this.d;if(n.view==this.opts.minView){var s=new Date(i,a,t),o=this.d._isSelected(s,this.d.cellType);o?n._handleAlreadySelectedDates.bind(n,o,s)():n._trigger("clickCell",s)}else n.down(new Date(i,a,t))},_onClickCell:function(e){var t=o(e.target).closest(".datepicker--cell");t.hasClass("-disabled-")||this._handleClick.bind(this)(t)}},p=o.fn.datepicker,g=p.Constructor,p.Navigation=function(e,t){this.d=e,this.opts=t,this.$buttonsContainer="",this.init()},p.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",o.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",o.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",o.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var e=this._getTitle(this.d.currentDate),t=g.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',o.extend({title:e},this.opts));this.d.$nav.html(t),"years"==this.d.view&&o(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(e){return this.d.formatDate(this.opts.navTitles[this.d.view],e)},_addButton:function(e){this.$buttonsContainer.length||this._addButtonsContainer();var t={action:e,label:this.d.loc[e]},a=g.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',t);o("[data-action="+e+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(a)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=o(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var e=this.d.parsedDate,t=e.month,a=e.year,i=e.date;switch(this.d.view){case"days":this.d._isInRange(new Date(a,t-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(a,t+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(a-1,t,i),"year")||this._disableNav("prev"),this.d._isInRange(new Date(a+1,t,i),"year")||this._disableNav("next");break;case"years":var n=g.getDecade(this.d.date);this.d._isInRange(new Date(n[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(n[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(e){o('[data-action="'+e+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(e){o('[data-action="'+e+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var t=o(e.target).closest("[data-action]").data("action");this.d[t]()},_onClickNavTitle:function(e){if(!o(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}},v=o.fn.datepicker,f=v.Constructor,v.Timepicker=function(e,t){this.d=e,this.opts=t,this.init()},v.Timepicker.prototype={init:function(){var e="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(e="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(e,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(e){var t=f.getParsedDate(e);this._handleDate(e),this.hours=t.hours<this.minHours?this.minHours:t.hours,this.minutes=t.minutes<this.minMinutes?this.minMinutes:t.minutes},_setMinTimeFromDate:function(e){this.minHours=e.getHours(),this.minMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>e.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(e){this.maxHours=e.getHours(),this.maxMinutes=e.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<e.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var e=this.opts;this.minHours=e.minHours<0||23<e.minHours?0:e.minHours,this.minMinutes=e.minMinutes<0||59<e.minMinutes?0:e.minMinutes,this.maxHours=e.maxHours<0||23<e.maxHours?23:e.maxHours,this.maxMinutes=e.maxMinutes<0||59<e.maxMinutes?59:e.maxMinutes},_validateHoursMinutes:function(e){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var e=f.getLeadingZeroNum,t={hourMin:this.minHours,hourMax:e(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:e(this.displayHours),minMin:this.minMinutes,minMax:e(this.maxMinutes),minStep:this.opts.minutesStep,minValue:e(this.minutes)},a=f.template('<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',t);this.$timepicker=o(a).appendTo(this.d.$datepicker),this.$ranges=o('[type="range"]',this.$timepicker),this.$hours=o('[name="hours"]',this.$timepicker),this.$minutes=o('[name="minutes"]',this.$timepicker),this.$hoursText=o(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=o(".datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=o('<span class="datepicker--time-current-ampm">').appendTo(o(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var e=f.getLeadingZeroNum(this.displayHours),t=f.getLeadingZeroNum(this.minutes);this.$hoursText.html(e),this.$minutesText.html(t),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(e){this._setDefaultMinMaxTime(),e&&(f.isSame(e,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):f.isSame(e,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(e)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(e,t){var a=e;e instanceof Date&&(a=f.getParsedDate(e).hours);var i="am";if(t||this.d.ampm)switch(!0){case 0==a:a=12;break;case 12==a:i="pm";break;case 11<a:a-=12,i="pm"}return{hours:a,dayPeriod:i}},set hours(e){this._hours=e;var t=this._getValidHoursFromDate(e);this.displayHours=t.hours,this.dayPeriod=t.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var t=o(e.target),a=t.attr("name");this.d.timepickerIsActive=!0,this[a]=t.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,t){this._handleDate(t),this.update()},_onMouseEnterRange:function(e){var t=o(e.target).attr("name");o(".datepicker--time-current-"+t,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var t=o(e.target).attr("name");this.d.inFocus||o(".datepicker--time-current-"+t,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}(window,jQuery);var applicationServerPublicKey="BGa5M248kds3Uw6AkR6igb3aq4OQw1zFmSBNuFj10kwdsqZ8DXoYtvLUPCMsUIpMKQiPzdOY-s-3mkVnPhRUiQg",isSubscribed=!1,swRegistration=null,pageWidth=$(document).width(),pageHeight=$(document).height(),currentElement=void 0,intro=introJs(),move=0,shown=0,colors=["#FEC3BF","#FFDDB9","#A5D8F3","#97EBED","#FEC3BF","#FFDDB9","#A5D8F3","#FEC3BF","#FFDDB9","#A5D8F3"];function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}function clearData(){$("#newDialog").val(""),$("#imeDialog").val("").parent().removeClass("is-dirty"),$("#opisDialog").val("").parent().removeClass("is-dirty"),$("#targetZacetek").val("").parent().removeClass("is-dirty"),$("#targetKonec").val("").parent().removeClass("is-dirty"),$("#oldStatus").val(""),$("#newStatus").val(""),$("#xpNaloge").val("").parent().removeClass("is-dirty"),$("#vezanCilj").get(0).placeholder="",$("input[name='sampleCilj']").parent().removeClass("is-dirty").find("li").removeAttr("data-selected"),getmdlSelect.init("#dialogCilj"),$("#kategorija").get(0).placeholder="",$("input[name='sampleKategorija']").parent().removeClass("is-dirty").find("li").attr("data-selected",""),getmdlSelect.init("#dialogKategorija"),$("#statusNaloge").get(0).placeholder="",$("#statusNaloge").parent().removeClass("is-dirty").find("li").attr("data-selected",""),getmdlSelect.init("#dialogStatus"),$("#listClani").find("input[type='checkbox']").parent().removeClass("is-checked")}function fillNaloge(){$("#iDialog").html("Ime naloge*"),$("#oDialog").html("Opis naloge*"),$("#tZacetek").html("Začetek naloge"),$("#tKonec").html("Konec naloge"),$("#tockeName").html("Vrednost naloge*"),$("#ciljiVsi").attr("style","display: none!important"),$("#dialogKategorija").attr("style","display: block!important"),$("#dialogZacetek").attr("style","display: block!important"),$("#dialogKonec").attr("style","display: block!important"),$("#claniNaloge").attr("style","display: block!important"),$("#dialogCilj").attr("style","display: block!important"),$("#dialogStatus").attr("style","display: block!important"),$("#ustvari").attr("onclick","validateNaloga(event, 0)"),$("#closeBtn").next().removeClass("color-cyan").addClass("color-red"),$("#dialog-hint").attr("onclick","helpNaloga()")}function fillCilji(){$("#iDialog").html("Ime cilja*"),$("#oDialog").html("Opis cilja*"),$("#ciljiVsi").attr("style","display: block!important"),$("#dialogKategorija").attr("style","display: none!important"),$("#dialogZacetek").attr("style","display: none!important"),$("#dialogKonec").attr("style","display: none!important"),$("#claniNaloge").attr("style","display: none!important"),$("#dialogCilj").attr("style","display: none!important"),$("#dialogStatus").attr("style","display: none!important"),$("#ustvari").attr("onclick","validateNaloga(event, 1)"),$("#closeBtn").next().removeClass("color-red").addClass("color-cyan"),$("#dialog-hint").attr("onclick","helpCilji()"),$("#tockeName").html("Točke cilja*")}function posodobiCilj(e){clearData(),fillCilji(),document.getElementById("dialog-title").innerHTML="Uredi cilj",document.getElementById("ustvari").innerHTML="Posodobi",$("#imeDialog").val(e.getElementsByTagName("td")[0].lastElementChild.lastElementChild.children[0].innerHTML).parent().addClass("is-dirty"),$("#opisDialog").val(e.getElementsByTagName("td")[0].lastElementChild.lastElementChild.children[1].innerHTML).parent().addClass("is-dirty"),$("#xpNaloge").val(e.getElementsByTagName("td")[0].lastElementChild.lastElementChild.children[2].value).parent().addClass("is-dirty"),"true"===e.getElementsByTagName("td")[0].lastElementChild.lastElementChild.children[3].value&&$("#skupnaNaloga").parent().get(0).MaterialCheckbox.check(),$("#newDialog").val(e.getElementsByTagName("td")[0].lastElementChild.lastElementChild.children[4].value),dialog.showModal(),$("#dialog-div").attr("style","height: auto"),$("#izbrisi").removeClass("hide-element"),currentElement=e}function posodobiNalogo(){clearData(),fillNaloge(),document.getElementById("dialog-title").innerHTML="Uredi nalogo",document.getElementById("ustvari").innerHTML="Posodobi",dialog.showModal(),$("#dialog-div").attr("style","height: "+$("#dialog").height()+"px;"),$("#izbrisi").removeClass("hide-element")}function dodajNovCilj(){clearData(),fillCilji(),document.getElementById("dialog-title").innerHTML="Dodaj nov cilj",document.getElementById("ustvari").innerHTML="Ustvari",dialog.showModal(),$("#izbrisi").addClass("hide-element")}function dodajNovoNalogo(){clearData(),fillNaloge(),document.getElementById("dialog-title").innerHTML="Dodaj novo nalogo",document.getElementById("ustvari").innerHTML="Ustvari",$("#statusNaloge").get(0).placeholder="Neopravljena",$("#dialogStatus").find("li[data-val=false]").attr("data-selected","true"),$("#statusNaloge").parent().addClass("is-dirty"),$("input[name='oldStatus']").val("false"),$("input[name='newStatus']").val("false"),getmdlSelect.init("#dialogStatus"),$("#newDialog").val(""),dialog.showModal(),$("#dialog-div").attr("style","height: "+$("#dialog").height()+"px;"),$("#izbrisi").addClass("hide-element")}function dodajPredlog(){clearData(),fillNaloge(),document.getElementById("dialog-title").innerHTML="Dodaj novo nalogo",document.getElementById("ustvari").innerHTML="Ustvari",$("#newDialog").val(""),dialog.showModal(),$("#dialog-div").attr("style","height: "+$("#dialog").height()+"px;"),$("#izbrisi").addClass("hide-element"),$("#imeDialog").val($("#ime_aktivnosti").text()).parent().addClass("is-dirty"),$("#opisDialog").val($("#opis_aktivnosti").text()).parent().addClass("is-dirty"),$("#xpNaloge").val("100").parent().addClass("is-dirty"),$("#kategorija").get(0).placeholder=$(".list-kategorija").find("[data-val=5aeabcd8be609116280b4d9c]").get(0).textContent.trim(),$("input[name='sampleKategorija']").parent().addClass("is-dirty").find("li[data-val=5aeabcd8be609116280b4d9c]").attr("data-selected","true"),getmdlSelect.init("#dialogKategorija"),$("#statusNaloge").get(0).placeholder="Neopravljena",$("#dialogStatus").find("li[data-val=false]").attr("data-selected","true"),$("#statusNaloge").parent().addClass("is-dirty"),$("input[name='oldStatus']").val("false"),$("input[name='newStatus']").val("false"),getmdlSelect.init("#dialogStatus")}function validateNaloga(e,t){if(""==document.forms.update_dialog.imeDialog.value)return $("#imeDialogErr").text("Polje je obvezno!").parent().addClass("is-invalid"),!1;if(""==document.forms.update_dialog.opisDialog.value)return $("#opisDialogErr").text("Polje je obvezno!").parent().addClass("is-invalid"),!1;if(""==document.forms.update_dialog.xpNaloge.value)return $("#xpErr").text("Polje je obvezno!").parent().addClass("is-invalid"),!1;if(0==t){var a=document.forms.update_dialog.dateZacetek.value,i=document.forms.update_dialog.dateKonec.value;if(""!=a&&""!=i&&(console.log(a,i),a!=i&&moment(a).isAfter(i)))return $("#dateKonecErr").text("Datum konca mora biti po datumu začetka!").parent().addClass("is-invalid"),!1;if(""==document.forms.update_dialog.sampleKategorija.value)return $("#kategorijaErr").text("Kategorija mora biti izbrana!").parent().addClass("is-invalid"),!1;if(""==document.forms.update_dialog.statusNaloge.value)return $("#kategorijaErr").text("Status naloge mora biti izbran!").parent().addClass("is-invalid"),!1}if(0==t){var n=$("#update_dialog").serialize();e.preventDefault(),$.ajax({url:"/ustvari_nalogo",type:"POST",contentType:"application/x-www-form-urlencoded",data:n,success:function(e){localStorage.setItem("Status",e),localStorage.setItem("Stran",2),window.location.reload(!0)},error:function(e,t,a,i){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:e}),console.log(t,a,i,e)}})}else{var s=$("#update_dialog").serialize();e.preventDefault(),$.ajax({url:"/ustvari_cilj",type:"POST",contentType:"application/x-www-form-urlencoded",data:s,success:function(e){localStorage.setItem("Status",e),localStorage.setItem("Stran",3),window.location.reload(!0)},error:function(e,t,a,i){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:i})}})}}function zapriVse(e){$(".hideOnClick").attr("style","display: none!important"),console.log("close all")}function onUserClick(e,t){var a=document.getElementsByClassName(e)[0].getElementsByClassName("user"),i=void 0;for(i=0;i<a.length;i++)a[i].onclick=function(e){return function(){t(e)}}(a[i])}function cleanNav(){$("#dashboard").removeClass("is-active"),$("#cilj").removeClass("is-active"),$("#naloge").removeClass("is-active"),$("#koledar").removeClass("is-active"),$("#menuDashboard").removeClass("is-active"),$("#menuCilj").removeClass("is-active"),$("#menuNaloge").removeClass("is-active"),$("#menuKoledar").removeClass("is-active")}function openSettings(){cleanNav(),$("#notifications").removeClass("is-active"),$("#druzina").removeClass("is-active"),$("#settings").addClass("is-active")}function openNotifications(){cleanNav(),$("#druzina").removeClass("is-active"),$("#settings").removeClass("is-active"),$("#notifications").addClass("is-active")}function openDruzina(){cleanNav(),$("#settings").removeClass("is-active"),$("#notifications").removeClass("is-active"),$("#druzina").addClass("is-active")}function initializeUI(){pushButton.addEventListener("click",function(){pushButton.disabled=!0,$("#pushButton").parent().addClass("is-disabled"),isSubscribed?unsubscribeUser():subscribeUser()}),swRegistration.pushManager.getSubscription().then(function(e){(isSubscribed=!(null===e))?console.log("User IS subscribed."):console.log("User is NOT subscribed."),updateBtn()})}function subscribeUser(){var e=urlB64ToUint8Array(applicationServerPublicKey);swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(e){updateSubscriptionOnServer(e,"/api/save-subscription"),console.log("User is subscribed."),isSubscribed=!0,updateBtn()}).catch(function(e){console.log("Failed to subscribe the user: ",e),updateBtn()})}function updateSubscriptionOnServer(e,t){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({subscription:e,user_id:$("#trenutniUporabnik").val()})}).then(function(e){if(!e.ok)throw new Error("Bad status code from server.",e);return e.json()}).then(function(e){if(!e.data||!e.data.success)throw new Error("Bad response from server.",e)})}function unsubscribeUser(){var t=void 0;swRegistration.pushManager.getSubscription().then(function(e){if(t=e)return e.unsubscribe()}).catch(function(e){console.log("Error unsubscribing",e)}).then(function(){updateSubscriptionOnServer(t,"/api/disable-subscription"),console.log("User is unsubscribed."),isSubscribed=!1,updateBtn()})}function urlB64ToUint8Array(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),i=new Uint8Array(a.length),n=0;n<a.length;++n)i[n]=a.charCodeAt(n);return i}function updateBtn(){if("denied"===Notification.permission)return pushButton.nextElementSibling.textContent="Obvestila niso dovoljena",pushButton.disabled=!0,$("#pushButton").parent().addClass("is-disabled"),void updateSubscriptionOnServer(null);$("#pushButton").removeAttr("disabled"),$("#pushButton").parent().removeClass("is-disabled"),waitForElementToDisplay(1e3)}function waitForElementToDisplay(e){if(pushButton.parentNode.MaterialSwitch)if(isSubscribed){pushButton.nextElementSibling.textContent="Izklopi obvestila v brskalniku";try{pushButton.parentNode.MaterialSwitch.on()}catch(e){console.log("Element ne obstaja.",e)}}else{pushButton.nextElementSibling.textContent="Vklopi obvestila v brskalniku";try{pushButton.parentNode.MaterialSwitch.off()}catch(e){console.log("Element ne obstaja.",e)}}else setTimeout(function(){waitForElementToDisplay(e)},e)}function tockeUdelezencev(e,t,a){for(var i=0;i<e;i++){var n=$("."+t+i).children(),s=n.length,o=0;if(n.each(function(){o+=parseInt($(this)[0].innerHTML)}),0==s)$("."+t+i).attr("style","display: none!important");else if(1==s)$("."+t+i+" :nth-child(1)").addClass("spanOnly");else{$("."+t+i+" :nth-child(1)").attr("style","width: "+n[0].innerHTML/o*100+"%; background-color: #BCD4F8").addClass("spanFirst");for(var r=2;r<s;r++)$("."+t+i+" :nth-child("+r+")").attr("style","width: "+n[r-1].innerHTML/o*100+"%; background-color: "+colors[r-2]+";");$("."+t+i+" :nth-child("+s+")").attr("style","width: "+n[s-1].innerHTML/o*100+"%; background-color: #96ECED;").addClass("spanLast")}}}function zapriNalogo(){$("#NalogaPopUp").css("display","none")}function distanceX(e){return function(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e=e.offsetParent;);return 0<=t?t:0}(e)}function napolniNalogo(e){deleteShowNaloga(e),e=e.children[1],$("#dashboardNaloga").removeClass("hide-element"),$("#opomnikKategorija").text(e.lastElementChild.children[0].value);var t=e.lastElementChild.children[1].value;$("#opomnikZacetek").text(moment(t).format("DD. MM. YYYY")+" "+moment(t).format("HH:mm"));var a=e.lastElementChild.children[2].value;$("#opomnikKonec").text(moment(a).format("DD. MM. YYYY")+" "+moment(a).format("HH:mm")),$("#opomnikCilj").append(e.lastElementChild.children[3].value),$("#opomnikId").val(e.lastElementChild.children[4].value),$("#opomnikIme").text(e.children[0].children[0].innerHTML),$("#opomnikOpis").text(e.children[0].children[2].innerHTML),$("#opomnikXp").text("+"+e.children[0].children[1].children[0].innerHTML),console.log("+"+e.children[0].children[1].children[0].innerHTML);var i=e.lastElementChild.children[5].cloneNode(!0),n=e.lastElementChild.children[6].cloneNode(!0);n.classList.remove("hide-element"),i.classList.remove("hide-element"),document.getElementById("opomnikVezani").appendChild(i),document.getElementById("opomnikAvtor").appendChild(n),""!=t&&""!=a||$("#opomnikBrezDatuma").removeClass("hide-element")}function deleteShowNaloga(e){$("#opomnikKategorija").text(""),$("#opomnikXp").text(""),$("#opomnikIme").text(""),$("#opomnikOpis").text(""),$("#opomnikVezani").empty(),$("#opomnikAvtor").empty(),$("#opomnikKategorija").text(""),$("#opomnikZacetek").text(""),$("#opomnikKonec").text(""),$("#opomnikBrezDatuma").addClass("hide-element"),$("#opomnikCilj").html($("#opomnikCilj").children())}function potrdiIzbris(){var e="/delete-naloga";"Uredi cilj"==document.getElementById("dialog-title").innerHTML&&(e="/delete-cilj");var t="id="+document.forms.update_dialog.newDialog.value;$.ajax({url:e,type:"POST",contentType:"application/x-www-form-urlencoded",data:t,success:function(e){localStorage.setItem("Status",e),localStorage.setItem("Stran",3),window.location.reload(!0)},error:function(e,t,a,i){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:i})}})}function chooseHelp(){$("#dashboard").hasClass("is-active")&&startIntroDashboard(),$("#koledar").hasClass("is-active")&&startIntroKoledar(),$("#naloge").hasClass("is-active")&&startIntroNaloge(),$("#cilj").hasClass("is-active")&&startIntroCilj(),$("#settings").hasClass("is-active")&&startIntroSettings(),$("#notifications").hasClass("is-active")&&startIntroNotifications(),$("#druzina").hasClass("is-active")&&startIntroDruzina()}function startIntroDashboard(){(intro=introJs()).setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{intro:"Pozdravljeni v aplikaciji MyFamily! Kliknili ste na gumb pomoč, ki se nahaja v spodnjem levem kotu. Ob kliku na gumb boste sprožili začetek predstavitve, ki vam bo razložila osnovne funkcionalnosti na strani kjer se nahajate. Če želite nadaljevati s predstavitvijo strani pregled pritisnite gumb naprej.Predstavitev lahko kadarkoli prekinete."},{element:document.querySelector("#dash1"),intro:"Navigacijska vrstica s pomočjo katero se premikate po aplikaciji. Aplikacija je sestavljena iz 4 glavnih podstrani: PREGLED - pregled celotne aplikacije, KOLEDAR - koledar kjer so prikazane naloge, NALOGE - stran, kjer lahko iščete po nalogah in CILJI - stran kjer so podrobneje prikazani cilji družine"},{element:document.querySelector("#opomnikiList"),intro:"Opomniki za naloge pri katerih sodelujete. Prihajajoče naloge imajo pred sabo zelen krog, naloge, ki se začnejo na današnji dan imajo rumen krog, naloge, ki so se že začele pa rdeč krog. Ob kliku na opomnik se prikažejo podrobnosti naloge."},{element:"#dash3",intro:"Status, s katerim lahko sporočite družini kaj počnete, kako se počutite, kdaj boste naredili nalogo..."},{element:"#dash4",intro:"Družinsko drevo, člani družine so urejeni glede na položaj v družini. Najvišje v drevesu so pradedki in prababice, nato dedki in babice, starši, otroci. Če oseba nima izbranega položaja v družini je prikazana na vrhu drevesa. S klikom na avatar lahko odprete okno kjer lahko vidite status osebe, različne možnosti sporočanja in število točk, ki jih je ta oseba danes zbrala."},{element:"#dash5",intro:"Skupni cilji družine. Te cilje ste označili kot skupne, zato so prikazani na pregledu. Od leve proti desni so: ime in opis cilja, razmerje med dosedaj zbranimi točkami in točkami potrebnimi za izpolnitev cilja, ter točke prikazane za vsakega člana družine posebej."},{element:"#dash6",intro:"Predlog za novo nalogo, ki je naključno generiran. S klikom na gumb DODAJ NALOGO se bodo polja avtomatsko izpolnila in nato lahko predlagano nalogo dodate med svoje naloge."},{element:document.querySelector("#dash7"),intro:"Tukaj se nahajajo osebne nastavitve, kjer lahko kadarkoli spremnite podatke, ki ste jih napisali ob registraciji. V meniju se nahajajo tudi nastanitve sporočanja, kjer lahko vklopite sporočila preko e-pošte, sporočila sms in obvestila na vašem pametnem telefonu. V meniju lahko k uporabi aplikacije povabite tudi druge družinske člane."}]}),intro.start()}function startIntroKoledar(){intro=introJs(),$(".monthly-header-title").attr("id","cal2"),$(".monthly-day-wrap").first().first().attr("id","cal3"),intro.setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{element:document.querySelector("#mycalendar"),intro:"Koledar. Na njem so prikazane naloge, glede na začetni datum naloge."},{element:"#cal2",intro:"Navigacijska vrstica koledarja. S puščicama se lahko premikate po mesecih naprej ali nazaj. Gumb danes vrne pogled na današnji dan. Gumb mesec pa vrne pogled na mesec v katerem je dan na katerem se nahajate."},{element:document.querySelector("#cal3"),intro:"Posamezni dnevi v katerih so prikazane naloge. Če kliknete na nalogo se vam bo odprl podroben opis naloge. Če pa kliknete na dan se vam bo odrl pogled z vsemi nalogami, ki potekajo na današnji dan."}]}),intro.start()}function startIntroNaloge(){(intro=introJs()).setOptions({tooltipPosition:"auto",nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",overlayOpacity:.5,steps:[{element:"#nal1",intro:"S pomočjo tega okna lahko iščete po nalogah. Izbirate lahko med različnimi parametri, ki vam bodo pomagali poiskati nalogo.\n\nVezan cilj - Cilj na katerega je vezana naloga.\nKategorija - kategorija v katero spada naloga.\nZa koga - komu je naloga namenjena.\nStatus - ali je naloga opravljena ali neopravljena.\nAvtor - avtor naloge.\nV koledarju - ali je naloga časovno definirana",position:"bottom-right"},{element:"#card0",intro:"Rezultat iskanja. Naloge iz iste kategorije imajo zgornji del obarvan z isto barvo. Posamezen okvir predstavlja eno nalogo. Če kliknete na gumb v spodnjem desnem kotu lahko nalogo urejate."},{element:document.querySelector("#dash1"),intro:"Tole je navigacijska vrstica. Aplikacija je sestavljena iz 4 različnih podstrani: PREGLED - pregled celotne aplikacije, KOLEDAR - koledar kjer so prikazane naloge, NALOGE - stran, kjer lahko iščete po nalogah in CILJI - stran kjer so podrobneje prikazani cilji družine"},{element:document.querySelector("#dash7"),intro:"Tukaj se nahajajo osebne nastavitve, kjer lahko kadarkoli spremnite podatke, ki ste jih napisali ob registraciji. V meniju se nahajajo tudi nastanitve sporočanja, kjer lahko vklopite sporočila preko e-pošte, sporočila sms in obvestila na vašem pametnem telefonu. V meniju je tudi povezava do strani kjer lahko k uporabi aplikacije povabite tudi druge družinske člane."}]}),intro.start()}function startIntroCilj(){(intro=introJs()).setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{element:"#cilj-1",intro:"Nedoseženi cilji družine. Cilj lahko urejate s klikom na vrstico v tabeli. Od leve proti desni so: ime in opis cilja, razmerje med dosedaj zbranimi točkami in točkami potrebnimi za izpolnitev cilja, točke prikazane za vsakega člana družine posebej, datum kdaj je bil cilj ustvarjen in kdaj je bil cilj nazadnje posodobljen."},{element:"#cilj-2",intro:"V tem oknu so prikazani vsi cilji družine, ki so že zaključeni. Cilj lahko urejate z klikom na vrstico v tabeli. Od leve proti desni ime in opis cilja, razmerje med dosedaj zbranimi točkami in točkami potrebnimi za izpolnitev cilja, točke prikazane za vsakega člana družine posebej, datum kdaj je bil cilj ustvarjen in kdaj je bil cilj nazadnje posodobljen."},{element:document.querySelector("#dash1"),intro:"Tole je navigacijska vrstica. Aplikacija je sestavljena iz 4 različnih podstrani: PREGLED - pregled celotne aplikacije, KOLEDAR - koledar kjer so prikazane naloge, NALOGE - stran, kjer lahko iščete po nalogah in CILJI - stran kjer so podrobneje prikazani cilji družine"},{element:document.querySelector("#dash7"),intro:"Tukaj se nahajajo osebne nastavitve, kjer lahko kadarkoli spremnite podatke, ki ste jih napisali ob registraciji. V meniju se nahajajo tudi nastanitve sporočanja, kjer lahko vklopite sporočila preko e-pošte, sporočila sms in obvestila na vašem pametnem telefonu. V meniju je tudi povezava do strani kjer lahko k uporabi aplikacije povabite tudi druge družinske člane."}]}),intro.start()}function startIntroSettings(){(intro=introJs()).setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{intro:"Osebne nastavitave. Tukaj lahko spremenite svoje podatke o imenu, e-pošti, telefonu, svoj položaj v družini, prikazno sliko ter svoje geslo za dostop do aplikacije. Za izhod iz osebnih nastavitev kliknite na eno izmed 4 strani v navigacijski vrstici."},{element:document.querySelector("#dash1"),intro:"Navigacijska vrstica. Aplikacija je sestavljena iz 4 različnih podstrani: PREGLED - pregled celotne aplikacije, KOLEDAR - koledar kjer so prikazane naloge, NALOGE - stran, kjer lahko iščete po nalogah in CILJI - stran kjer so podrobneje prikazani cilji družine"},{element:document.querySelector("#dash7"),intro:"Tukaj se nahajajo osebne nastavitve, kjer lahko kadarkoli spremnite podatke, ki ste jih napisali ob registraciji. V meniju se nahajajo tudi nastanitve sporočanja, kjer lahko vklopite sporočila preko e-pošte, sporočila sms in obvestila na vašem pametnem telefonu. V meniju je tudi povezava do strani kjer lahko k uporabi aplikacije povabite tudi druge družinske člane."}]}),intro.start()}function startIntroNotifications(){(intro=introJs()).setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{intro:"Trenutno se nahajate na strani z nastavitvami sporočanja. Obvestila iz aplikacije lahko prejmete na tri različne načine: SMS, e-pošta in push obvestila v brskalniku ali na telefonu."},{element:document.querySelector("#dash1"),intro:"Navigacijska vrstica. Aplikacija je sestavljena iz 4 različnih podstrani: PREGLED - pregled celotne aplikacije, KOLEDAR - koledar kjer so prikazane naloge, NALOGE - stran, kjer lahko iščete po nalogah in CILJI - stran kjer so podrobneje prikazani cilji družine"},{element:document.querySelector("#dash7"),intro:"Tukaj se nahajajo osebne nastavitve, kjer lahko kadarkoli spremnite podatke, ki ste jih napisali ob registraciji. V meniju se nahajajo tudi nastanitve sporočanja, kjer lahko vklopite sporočila preko e-pošte, sporočila sms in obvestila na vašem pametnem telefonu. V meniju je tudi povezava do strani kjer lahko k uporabi aplikacije povabite tudi druge družinske člane."}]}),intro.start()}function startIntroDruzina(){(intro=introJs()).setOptions({nextLabel:"Naprej &rarr;",prevLabel:"&larr; Nazaj",skipLabel:"Zapri",doneLabel:"Konec",tooltipPosition:"auto",overlayOpacity:.5,steps:[{intro:"Trenutno ste na strani kjer lahko k uporabi aplikacije povabite tudi druge družinske člane. V polje E-mail napištite e-poštni naslov osebe, ki jo želite povabiti v vašo družino. Na naslov bo nekaj minutah prispelo elektronsko sporočilo z podrobnimi navodili za včlanitev v družino."},{element:document.querySelector("#dash1"),intro:"Tole je navigacijska vrstica. Aplikacija je sestavljena iz 4 različnih podstrani: PREGLED - pregled celotne aplikacije, KOLEDAR - koledar kjer so prikazane naloge, NALOGE - stran, kjer lahko iščete po nalogah in CILJI - stran kjer so podrobneje prikazani cilji družine"},{element:document.querySelector("#dash7"),intro:"Tukaj se nahajajo osebne nastavitve, kjer lahko kadarkoli spremnite podatke, ki ste jih napisali ob registraciji. V meniju se nahajajo tudi nastanitve sporočanja, kjer lahko vklopite sporočila preko e-pošte, sporočila sms in obvestila na vašem pametnem telefonu. V meniju je tudi povezava do strani kjer lahko k uporabi aplikacije povabite tudi druge družinske člane."}]}),intro.start()}function helpNaloga(){0==move?(intro.removeHints(),(intro=introJs()).setOptions({hintButtonLabel:"Razumem!",hintPosition:"top-right",hintAnimation:"false",hints:[{element:"#imeDialog",hint:"Prikazno ime naloge. Lahko vsebuje do 32 znakov.",position:"left"},{element:"#opisDialog",hint:"Opis naloge, kaj je potrebno narediti, da je naloga dosežena.",position:"left"},{element:"#targetZacetek",hint:"Datum začetka naloge. Naloga je v koledar postavljena glede na njen začetni datum. Če naloga nima izbranega začetnega datuma, je njen začetni datum kadar je bila ustvarjena.",position:"left"},{element:"#targetKonec",hint:"Datum konca naloge. S tem datum določite do kdaj mora biti naloga opravljena, oziroma kdaj je bila opravljena. V primeru, da končni datum ni izbran je avtomatsko določen na isti dan kot začetni datum.",position:"left"},{element:"#vezanCilj",hint:"Cilj na katerega je vezana naloga. Ko je naloga opravljena se pod ta cilj štejejo točke naloge.",position:"left"},{element:"#kategorija",hint:"Kategorija v katero spada naloga.",position:"left"},{element:"#xpNaloge",hint:"Vrednost naloge, ko je naloga opravljena se točke prištejejo k vezanemu cilju.",position:"bottom"},{element:"#statusNaloge",hint:"Status naloge, lahko je opravljena ali pa neopravljena.",position:"left"},{element:"#claniNaloge",hint:"Družinski člani, označite tiste katerim je naloga namenjena.",position:"left"}]}),intro.onhintsadded(function(){console.log("all hints added"),0==move&&moveHints("#hintNal")}),intro.onhintclick(function(i,e,t){setTimeout(function(){var e=$(".introjs-tooltipReferenceLayer");e.appendTo($("#hintNal"));var t=$("#dialog").get(0).getBoundingClientRect();e.addClass("notransition");var a=$(i).offset().top-$(i).parent().offset().top-$(i).parent().scrollTop();e.css({color:"black",top:a-5,left:i.getBoundingClientRect().left-t.left-2}),$('[data-step*="6"].introjs-tooltipReferenceLayer').css({color:"black",top:a+15,left:i.getBoundingClientRect().left-t.left-20})},1)}),intro.onhintclose(function(e){console.log("hint closed",e)}),intro.addHints()):0==shown?(intro.showHints(),shown=1):1==shown&&(intro.hideHints(),shown=0),move=1}function helpCilji(){0==move?(intro.removeHints(),(intro=introJs()).setOptions({hintButtonLabel:"Razumem!",hintPosition:"top-right",hintAnimation:"false",hints:[{element:"#imeDialog",hint:"Prikazno ime cilja. Lahko vsebuje do 32 znakov.",position:"left"},{element:"#opisDialog",hint:"Opis aktivnosti, ki jih vsebuje cilj.",position:"left"},{element:"#xpNaloge",hint:"Število točk potrebnih za dosego cilja.",position:"bottom"},{element:"#ciljiVsi",hint:"Če je to okno obkljukano se bo cilj vsem članom družine prikazal na prvi strani med skupnimi cilji.",position:"left"}]}),intro.onhintclose(function(e){console.log("hint closed",e)}),intro.onhintsadded(function(){console.log("all hints added"),0==move&&moveHints("#dialog")}),intro.onhintclick(function(i,e,t){console.log("hint clicked",i,e,t),setTimeout(function(){var e=$(".introjs-tooltipReferenceLayer");e.appendTo($("#dialog"));var t=$("#dialog").get(0).getBoundingClientRect();e.addClass("notransition");var a=$(i).offset().top-$(i).parent().offset().top-$(i).parent().scrollTop();e.css({color:"black",top:a-20,left:i.getBoundingClientRect().left-t.left-2}),$('[data-step*="2"].introjs-tooltipReferenceLayer').css({color:"black",top:a,left:i.getBoundingClientRect().left-t.left-20})},1)}),intro.addHints()):0==shown?(intro.showHints(),shown=1):1==shown&&(intro.hideHints(),shown=0),move=1}function pregled(){var e=location.protocol+"//"+location.host+location.pathname;window.history.replaceState({},document.title,e),localStorage.setItem("Stran",1),window.location.reload(!0)}function moveHints(e){shown=1,$(".introjs-hints").prependTo($(e));var n=$(e).get(0).getBoundingClientRect();$(".introjs-hint").each(function(e,t){var a=t.getBoundingClientRect().left-2*n.left,i=t.getBoundingClientRect().top-2*n.top;t.setAttribute("style","left: "+a+"px;top: "+i+"px;")})}function deleteHints(){shown=move=0;var e=document.querySelector(".introjs-hints");if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function validateSettings(){return""==document.forms.settingsForm.set_name.value?($("#errIme").text("Polje je obvezno!").parent().addClass("is-invalid"),!1):document.forms.settingsForm.set_password.value!=document.forms.settingsForm.set_password_confirm.value?($("#errPass2").parent().addClass("is-invalid"),!1):""==document.forms.settingsForm.set_phone.value?($("#errTel").text("Polje je obvezno!").parent().addClass("is-invalid"),!1):void 0}function checkMail(e){return e.value?/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i.test(e.value)?(e.setCustomValidity(""),e.parentElement.classList.remove("is-invalid"),void console.log("test")):(e.setCustomValidity("Prosimo vključite '@'in '.' v email naslov!"),!1):($("#invErrEmail").text("Prosimo vpišite email naslov!").parent().addClass("is-invalid"),!1)}$.fn.datepicker.language.sl={days:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],daysShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],daysMin:["Ne","Po","To","Sr","Če","Pe","So"],months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danes",clear:"Ponastavi",dateFormat:"dd. mm. yyyy",timeFormat:"hh:ii",firstDay:0},r(function(){localStorage.getItem("Status")&&(document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:localStorage.getItem("Status")}),localStorage.clear())}),jQuery(function(n){if(localStorage.getItem("Stran")){switch(localStorage.getItem("Stran")){case 0:n("#menuDashboard").addClass("is-active"),n("#dashboard").addClass("is-active");break;case 1:n("#menuKoledar").addClass("is-active"),n("#koledar").addClass("is-active");break;case 2:n("#menuNaloge").addClass("is-active"),n("#naloge").addClass("is-active");break;case 3:n("#menuCilj").addClass("is-active"),n("#cilj").addClass("is-active");break;case 4:n("#menuSettings").addClass("is-active"),n("#settings").addClass("is-active");break;case 5:n("#menuNotifications").addClass("is-active"),n("#notifications").addClass("is-active");break;case 6:n("#menuDruzina").addClass("is-active"),n("#druzina").addClass("is-active");break;default:n("#menuDashboard").addClass("is-active"),n("#dashboard").addClass("is-active")}localStorage.removeItem("Stran")}switch(setTimeout(function(){alert("Vaša seja je potekla, za nadaljevanje se morate ponovno prijaviti!"),window.open("https://ekosmartweb.herokuapp.com/","_blank")},36e5),"serviceWorker"in navigator&&"PushManager"in window?(console.log("Service Worker and Push is supported"),navigator.serviceWorker.register("sw.js").then(function(e){console.log("Service Worker is registered",e),swRegistration=e,initializeUI()}).catch(function(e){console.error("Service Worker Error",e)})):(console.warn("Push messaging is not supported"),pushButton.textContent="Push Not Supported"),document.onclick=zapriVse(),document.onmouseup=function(e){var t=n(".card-info");n(t).is(":visible")&&(t.is(e.target)||0!==t.has(e.target).length||t.hide())},tockeUdelezencev(n("#table-cilji").find("tr").length-1,"progZ","razmZ"),tockeUdelezencev(n("#table-cilji-end").find("tr").length-1,"progK","razmK"),tockeUdelezencev(n("#table-skupni").find("tr").length-1,"progS","razmS"),onUserClick("container",function(e){console.log("klik"+e);var t=e.getBoundingClientRect(),a=n(".card-info");n("#userCard").text(e.nextElementSibling.value),n("#phoneCall").attr("href","tel:"+e.nextElementSibling.nextElementSibling.value),n("#smsSend").attr("href","sms:"+e.nextElementSibling.nextElementSibling.value),n("#mailSend").attr("href","mailto:"+e.nextElementSibling.nextElementSibling.nextElementSibling.value),n("#viberOpen").attr("href","viber://contact?number=%2B386"+parseInt(e.nextElementSibling.nextElementSibling.value));var i=e.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.value;i||(i=0),i<0?n("#dayXp").text(i+" točk"):n("#dayXp").text("+ "+i+" točk"),e.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling?(n("#status").html(e.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.children[0].innerHTML),n(".tri-card-no-status").removeClass("tri-card-no-status").addClass("tri-card-status")):(n("#status").html(""),n(".tri-card-status").addClass("tri-card-no-status").removeClass("tri-card-status")),600<pageWidth?n(".card-info").css({top:distanceX(e)-parseFloat(a.css("height")),left:t.left-93,display:"block"}):n(".card-info").css({top:distanceX(e)-parseFloat(a.css("height")),left:t.left-50,display:"block"})}),n("#mycalendar").monthly({mode:"event",dataType:"json",jsonUrl:"/public/calendar/"+id+"/events.json"}),window.location.protocol){case"http:":case"https:":break;case"file:":alert("Just a heads-up, events will not work when run locally.")}document.querySelector("#izbrisi").onclick=function(){var e="Ali res želite izbirisati nalogo? S pritiskom na gumb Izbriši bo naloga dokočno izbrisana in do nje ne boste mogli več dostopati!";"Uredi cilj"==document.getElementById("dialog-title").innerHTML&&(e="Ali res želite izbirisati cilj? S pritiskom na gumb Izbriši bo vaš cilj dokočno izbrisan in do njega ne boste mogli več dostopati!"),confirm(e)&&potrdiIzbris()};var e=document.querySelector("dialog");e.showModal||dialogPolyfill.registerDialog(e);for(var t=document.querySelectorAll(".closeX"),a=function(e){t[e].onclick=function(){t[e].parentNode.classList.add("hide-element")}},i=0;i<t.length;i++)a(i);function s(e,t){var a=document.getElementById(e),i=a.getElementsByTagName("TR"),n=void 0;for(n=1;n<i.length;n++)a.rows[n].onclick=function(e){return function(){t(e)}}(a.rows[n])}e.querySelector(".close").onclick=function(){e.close(),deleteHints()},function(e,t){var a=document.getElementById("opomnikiList").getElementsByTagName("li"),i=void 0;for(i=0;i<a.length;i++)a[i].onclick=function(e){return function(){napolniNalogo(e)}}(a[i])}(),s("table-cilji",function(e){posodobiCilj(e)}),s("table-cilji-end",function(e){posodobiCilj(e)});var o=n("input[name=person]");n("#checkboxVsi").on("click",function(){n(this).is(":checked")?o.parent().each(function(e,t){t.MaterialCheckbox.check()}):o.parent().each(function(e,t){t.MaterialCheckbox.uncheck()})}),n(document).on("change","input[name=person]",function(e){n("#checkboxVsi").is(":checked")&&n("input[name=person]:checked").length<o.length?n("#checkboxVsi").parent()[0].MaterialCheckbox.uncheck():n("#checkboxVsi").is(":checked")||n("input[name=person]:checked").length!==o.length-1||n("#checkboxVsi").parent()[0].MaterialCheckbox.check()}),n("#pickZac").datepicker({language:"sl",timeFormat:"hh:ii",clearButton:"true",position:"right top",onSelect:function(e,t){n("#targetZacetek").val(e),n("#dateZacetek").val(t),document.getElementById("dialogZacetek").MaterialTextfield.checkDirty()}}),n("#pickKon").datepicker({language:"sl",timeFormat:"hh:ii",clearButton:"true",onSelect:function(e,t){n("#targetKonec").val(e),n("#dateKonec").val(t),document.getElementById("dialogKonec").MaterialTextfield.checkDirty()}}),n("#dialogZacetek").click(function(e){var t=n("#pickZac");t.removeClass("hide-element"),n(document).mouseup(function(e){t.is(e.target)||0!==t.has(e.target).length||t.addClass("hide-element")})}),n("#dialogKonec").click(function(e){var t=n("#pickKon");t.removeClass("hide-element"),n(document).mouseup(function(e){t.is(e.target)||0!==t.has(e.target).length||t.addClass("hide-element")})}),n("#nalogaDone").click(function(e){var t="newDialog="+n("#opomnikId").val()+"&newStatus=true&mode=1";n.ajax({url:"/ustvari_nalogo",type:"POST",contentType:"application/x-www-form-urlencoded",data:t,success:function(e){localStorage.setItem("Status",e),localStorage.setItem("Stran",0),window.location.reload(!0)},error:function(e,t,a,i){document.querySelector("#mainToast").MaterialSnackbar.showSnackbar({message:e}),console.log(t,a,i,e)}})})}),function(e,t,a,i,n,s){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:856613,hjsv:6},n=t.getElementsByTagName("head")[0],(s=t.createElement("script")).async=1,s.src="https://static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,n.appendChild(s)}(window,document);