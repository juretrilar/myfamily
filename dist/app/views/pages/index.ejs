<!doctype html>
<html lang="en">
<%- include('../partials/head') -%>
<body>
    <div class="text-layout mdl-header mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <%- include('../partials/nav') -%>
        <div class="mdl-card card-info mdl-shadow--2dp overflow-visible hide-element tri-card-no-status podatki-user">
            <div class="mdl-dialog__content padding-10 align-center">
                <h4 id="userCard" class="align-center margin-zero"></h4>
                <span class="mdl-chip mdl-color--green mdl-color-text--white mdl-chip-small">
                    <span class="mdl-chip__text">+100 xp</span>
                </span>
                <span class="mdl-chip mdl-color--red mdl-color-text--white mdl-chip-small">
                    <span class="mdl-chip__text">-100 xp</span>
                </span>
                <p id="status" style="margin: 0"></p>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <a id="phoneCall"class="button-action mdl-js-button"><i class="icon material-icons">phone</i></a>
                <a id="smsSend" class="button-action mdl-js-button"><i class="icon material-icons">sms</i></a>
                <a id="mailSend"  class="button-action mdl-js-button"><i class="icon material-icons">mail</i></a>
                <a id="viberOpen" class="button-action mdl-js-button"><img align="middle" src="http://icons.iconarchive.com/icons/bokehlicia/captiva/256/web-viber-icon.png"></a>
            </div>
        </div>
        <main class="mdl-layout__content">
            <section id="dashboard" class="mdl-layout__tab-panel <% if(tab == 0) { %> is-active <% } %>">
                <%- include('../pages/dashboard') -%>
            </section>
            <section id="koledar" class="mdl-layout__tab-panel <% if(tab == 1) { %> is-active <% } %>">
                <%- include('../pages/koledar') -%>
            </section>
            <section id="naloge" class="mdl-layout__tab-panel <% if(tab == 2) { %> is-active <% } %>">
                <%- include('../pages/naloge') -%>
            </section>
            <section id="cilj" class="mdl-layout__tab-panel <% if(tab == 3) { %> is-active <% } %>">
                <%- include('../pages/cilji') -%>
            </section>
            <section id="settings" class="mdl-layout__tab-panel">
                <%- include('../pages/settings') -%>
            </section>
            <section id="notifications" class="mdl-layout__tab-panel">
                <%- include('../pages/notifications') -%>
            </section>
            <section id="druzina" class="mdl-layout__tab-panel">
                <%- include('../pages/druzina') -%>
            </section>
        </main>
        <%- include('../partials/footer') -%>
    </div>
    <dialog id="dialog" class="mdl-dialog dialog-main ">
        <div class="mdl-card mdl-shadow--2dp">
            <button id="closeBtn" class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--fab mdl-color--grey-400 close closeDialog">
                <i class="material-icons mdl-color-text--grey-200" role="presentation">close</i>
                <span class="visuallyhidden">add</span>
            </button>
            <div class="mdl-card__title mdl-color--blue-300" >
                <h3 id="dialog-title" class="mdl-card__title-text mdl-color-text--white"></h2>
            </div>
            <div class="mdl-card__supporting-text">
                <form id="update_dialog">
                    <input type="hidden" name="newDialog" id="newDialog">
                    <div class="mdl-dialog__content">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-modal">
                            <input class="mdl-textfield__input" type="text" id="imeDialog" name="imeDialog" maxlength="20"/>
                            <label class="mdl-textfield__label" for="imeDialog" id="iDialog"></label>
                            <span class="mdl-textfield__error" id="imeDialogErr"></span>
                        </div>
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-modal">
                            <input class="mdl-textfield__input" type="text" id="opisDialog" name="opisDialog"/>
                            <label class="mdl-textfield__label" for="opisDialog" id="oDialog"></label>
                            <span class="mdl-textfield__error" id="opisDialogErr"></span>
                        </div>
                        <div id="dialogZacetek" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-modal">
                            <input class="mdl-textfield__input " type="text" id="targetZacetek" name="targetZacetek" title="Izberite dan, ko je bil cilj postavljen" pattern="^[0-9]{2}-[0-9]{2}-[0-9]{4}\sob\s[0-9]{2}:[0-9]{2}" readonly>
                            <label class="mdl-textfield__label" for="targetZacetek" id="tZacetek"></label>
                            <input type="hidden" name="dateZacetek" id="dateZacetek">
                            <span class="mdl-textfield__error">Zapis datuma je napačen.</span>
                        </div>
                        <div id="dialogKonec" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-modal">
                            <input class="mdl-textfield__input " type="text" id="targetKonec" name="targetKonec" title="Izberite dan, ko je bil cilj končan" pattern="^[0-9]{2}-[0-9]{2}-[0-9]{4}\sob\s[0-9]{2}:[0-9]{2}" readonly>
                            <label class="mdl-textfield__label" for="targetKonec" id="tKonec"> </label>
                            <input type="hidden" name="dateKonec" id="dateKonec">
                            <span class="mdl-textfield__error" id="dateKonecErr">Zapis datuma je napačen.</span>
                        </div>
                        <div id="dialogCilj" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select textfield-modal" hidden>
                            <input type="text" class="mdl-textfield__input" id="vezanCilj" readonly required/>
                            <input type="hidden" name="sampleCilj">
                            <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
                            <label for="vezanCilj" class="mdl-textfield__label">Vezano na cilj</label>
                            <ul for="vezanCilj" class="mdl-menu mdl-menu--bottom-left mdl-js-menu list-cilj">
                                <% for (var i = 0; i < cilji.length; i++) { %>
                                <li class="mdl-menu__item" data-val="<%= cilji[i].id %>"><%= cilji[i].ime %></li>
                                <% } %>
                            </ul>
                        </div>
                        <div id="dialogKategorija" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select textfield-modal" hidden>
                            <input type="text" class="mdl-textfield__input" id="kategorija" readonly required/>
                            <input type="hidden" name="sampleKategorija" id="sampleKategorija">
                            <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
                            <label for="kategorija" class="mdl-textfield__label">Kategorija</label>
                            <ul for="kategorija" class="mdl-menu mdl-menu--bottom-left mdl-js-menu list-kategorija" data-selected="true">
                                <% for (var i = 0; i < kategorija.length; i++) { %>
                                <li class="mdl-menu__item" data-val="<%= kategorija[i].id %>"><%= kategorija[i].ime %></li>
                                <% } %>
                            </ul>
                        </div>
                        <ul class="mdl-list margin-zero padding-zero" id="xpStatus">
                            <li class="mdl-list__item padding-zero overflow-visible dialog-duo">
                                <div class="mdl-list__item-primary-content" style="padding-right: 10px">
                                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label textfield-modal">
                                        <input class="mdl-textfield__input" type="number" id="xpNaloge" name="xpNaloge" title="Število točk potrebnih dokončanje cilja.">
                                        <label class="mdl-textfield__label" for="xpNaloge">XP naloge</label>
                                        <span class="mdl-textfield__error">Polje je obvezno!</span>
                                    </div>
                                </div>
                                <div class="mdl-list__item-primary-content" style="padding-left: 10px">
                                    <div id="ciljiVsi">
                                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="skupnaNaloga">
                                            <input type="checkbox" id="skupnaNaloga" name="skupnaNaloga" class="mdl-checkbox__input">
                                            <span class="mdl-checkbox__label" id="vsiCiljiLabel">Dodaj med skupne cilje</span>
                                        </label>
                                    </div>
                                    <div id="dialogStatus" class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select textfield-modal">
                                        <input type="text" value="" class="mdl-textfield__input" id="statusNaloge" readonly>
                                        <input type="hidden" value="" name="newStatus">
                                        <input type="hidden" value="false" name="oldStatus">
                                        <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
                                        <label for="statusNaloge" class="mdl-textfield__label">Status naloge</label>
                                        <ul for="statusNaloge" class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
                                            <li class="mdl-menu__item" data-val="true">Opravljeno</li>
                                            <li class="mdl-menu__item" data-val="false">Neopravljeno</li>
                                        </ul>
                                    </div>
                                </div>    
                            </li>
                        </ul>
                        <div id="claniNaloge">
                            <h4 class="mdl-typography--subhead dialog-sub">Člani naloge</h4>
                            <ul class="mdl-list" style="margin: 0;" id="listClani">
                                <li class="mdl-list__item mdl-list__item--no-padding">
                                    <span class="mdl-list__item-primary-content">Označi/odznači vse člane družine</span>
                                    <span class="mdl-list__item-secondary-action">
                                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect label-modal" for="checkboxVsi">
                                            <input type="checkbox" id="checkboxVsi" name="person" class="mdl-checkbox__input checkbox-modal"/>
                                        </label>
                                    </span>
                                </li>
                                <% for (var i = 0; i < uporabniki.length; i++) { %>
                                <li class="mdl-list__item mdl-list__item--no-padding">
                                    <span class="mdl-list__item-primary-content">
                                    <img class="mdl-chip__contact author-chip" src="<%= uporabniki[i].slika %>">
                                    <%= uporabniki[i].ime %>
                                    </span>
                                    <span class="mdl-list__item-secondary-action">
                                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect label-modal" for="person<%= i %>">
                                            <input type="checkbox" id="person<%= i %>" name="person" value="<%= uporabniki[i].id %>" class="mdl-checkbox__input checkbox-modal"/>
                                        </label>
                                    </span>
                                </li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                </form>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button id="izbrisi" type="button" class="mdl-button mdl-color--red-400 delete">Izbriši</button>
                <button id="ustvari" type="button" value="submit" class="mdl-button mdl-color--grey-400 create"></button>
            </div>
        </div>
    </dialog>
    <div id="mainToast" class="mdl-js-snackbar mdl-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
    </div>
    <%- include('../partials/script') -%>
</body>
</html>